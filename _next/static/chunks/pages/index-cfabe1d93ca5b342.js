(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{4971:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Y});var i=l(7876),r=l(7328),s=l.n(r),o=l(4232),a=l(6717),n=l(2198),d=l(3679);class c{copyPropertyValuesFrom(e){e.id&&(this.id=e.id),e.Id&&(this.Id=e.Id),null!==e.Desk&&(this.Desk=e.Desk),e.CoverUrl&&(this.CoverUrl=e.CoverUrl),e.GameId&&(this.GameId=e.GameId),e.Name&&(this.Name=e.Name),e.uri&&(this.uri=e.uri),e.Keywords&&(this.Keywords=e.Keywords),e.Uri&&(this.Uri=e.Uri),null!==e.NotInPlaynite&&(this.NotInPlaynite=e.NotInPlaynite),null!==e.PLCriticScore&&(this.PLCriticScore=e.PLCriticScore),null!==e.ReviewCategory&&(this.ReviewCategory=e.ReviewCategory),null!==e.LastActivityYear&&(this.LastActivityYear=e.LastActivityYear),e.ReleaseMonth&&(this.ReleaseMonth=e.ReleaseMonth),e.AddedMonth&&(this.AddedMonth=e.AddedMonth),e.BoughtMonth&&(this.BoughtMonth=e.BoughtMonth),e.Added&&(this.Added=e.Added),e.SteamId&&(this.SteamId=e.SteamId),e.DateBought&&(this.DateBought=e.DateBought),null!==e.OpenCriticScore&&(this.OpenCriticScore=e.OpenCriticScore),null!==e.IGDBCriticScore&&(this.IGDBCriticScore=e.IGDBCriticScore),null!==e.IGDBCommunityScore&&(this.IGDBCommunityScore=e.IGDBCommunityScore),e.IGDBId&&(this.IGDBId=e.IGDBId),e.AgeRating&&(this.AgeRating=e.AgeRating.indexOf("|")>-1?e.AgeRating.split("|")[0]:e.AgeRating),!0==e.Android&&(this.Android=!0),null!==e.AgeRating&&(this.AgeRating=(null!=(eI=this.AgeRating)?eI:"-").padStart(2,"0")),e.Bundles&&(this.Bundles=e.Bundles,this.Bundles.length>0&&(this.Bundle=this.Bundles[0])),this.Hidden=null!=(eP=e.Hidden)&&eP,this.Greek=null!=(eM=e.Greek)&&eM,e.ReleaseDate&&(this.ReleaseDate=e.ReleaseDate),this.IsInstalled=null!=(eD=e.IsInstalled)&&eD,null!==e.LowestPrice&&(this.LowestPrice=e.LowestPrice),null!==e.Playtime&&(this.Playtime=e.Playtime),null!==e.InstallSize&&(this.InstallSize=e.InstallSize),this.CriticScore=Math.max(null!=(eE=e.PLCriticScore)?eE:0,null!=(eO=e.IGDBCriticScore)?eO:0,null!=(eR=e.OpenCriticScore)?eR:0),0===this.CriticScore&&(this.CriticScore=null),this.CommunityScore=Math.max(null!=(eL=e.PLCommunityScore)?eL:0,null!=(ez=e.IGDBCommunityScore)?ez:0),0===this.CommunityScore&&(this.CommunityScore=null),e.Tags&&(this.Tags=e.Tags),e.Genres&&(this.Genres=e.Genres),e.Features&&(this.Features=e.Features),e.Categories&&(this.Categories=e.Categories),e.Source&&(this.Source=e.Source),e.CompletionStatus&&(this.CompletionStatus=e.CompletionStatus),null!==e.CriticScoreGroup&&(this.CriticScoreGroup=e.CriticScoreGroup),null!==e.CommunityScoreGroup&&(this.CommunityScoreGroup=e.CommunityScoreGroup),null!==e.ReleaseYear&&(this.ReleaseYear=e.ReleaseYear),e.LastActivity&&(this.LastActivity=e.LastActivity),e.Notes&&(this.Notes=e.Notes),e.Steam&&(this.Steam=e.Steam),e.SteamScreenshots&&(this.SteamScreenshots=e.SteamScreenshots),null!==e.HlMS&&(this.HlMS=e.HlMS),null!==e.HlME&&(this.HlME=e.HlME),null!==e.HLC&&(this.HLC=e.HLC),null!==e.Reviews&&(this.Reviews=e.Reviews),null!==e.PlayerCount&&(this.PlayerCount=e.PlayerCount),null!==e.avgfps&&(this.avgfps=e.avgfps),null!==e.minfps&&(this.minfps=e.minfps),null!==e.maxfps&&(this.maxfps=e.maxfps),null!==e.cpupwravg&&(this.cpupwravg=e.cpupwravg),null!==e.cpupwrmin&&(this.cpupwrmin=e.cpupwrmin),null!==e.cpupwrmax&&(this.cpupwrmax=e.cpupwrmax),null!==e.gpupwravg&&(this.gpupwravg=e.gpupwravg),null!==e.gpupwrmin&&(this.gpupwrmin=e.gpupwrmin),null!==e.gpupwrmax&&(this.gpupwrmax=e.gpupwrmax),null!==e.cputempavg&&(this.cputempavg=e.cputempavg),null!==e.cputempmin&&(this.cputempmin=e.cputempmin),null!==e.cputempmax&&(this.cputempmax=e.cputempmax),null!==e.gputempavg&&(this.gputempavg=e.gputempavg),null!==e.gputempmin&&(this.gputempmin=e.gputempmin),null!==e.gputempmax&&(this.gputempmax=e.gputempmax),null!==e.mobotempavg&&(this.mobotempavg=e.mobotempavg),null!==e.mobotempmin&&(this.mobotempmin=e.mobotempmin),null!==e.mobotempmax&&(this.mobotempmax=e.mobotempmax),null!==e.totpwravg&&(this.totpwravg=e.totpwravg),null!==e.totpwrmin&&(this.totpwrmin=e.totpwrmin),null!==e.totpwrmax&&(this.totpwrmax=e.totpwrmax),null!==e.cpuutilavg&&(this.cpuutilavg=e.cpuutilavg),null!==e.cpuutilmin&&(this.cpuutilmin=e.cpuutilmin),null!==e.cpuutilmax&&(this.cpuutilmax=e.cpuutilmax),null!==e.gpuutilavg&&(this.gpuutilavg=e.gpuutilavg),null!==e.gpuutilmin&&(this.gpuutilmin=e.gpuutilmin),null!==e.gpuutilmax&&(this.gpuutilmax=e.gpuutilmax),null!==e.vramutilavg&&(this.vramutilavg=e.vramutilavg),null!==e.vramutilmin&&(this.vramutilmin=e.vramutilmin),null!==e.vramutilmax&&(this.vramutilmax=e.vramutilmax),e.OtherSources&&(this.OtherSources=e.OtherSources),null!==e.DeckPerformance&&(this.DeckPerformance=e.DeckPerformance),null!==e.DeckControls&&(this.DeckControls=e.DeckControls),null!==e.DeckVisuals&&(this.DeckVisuals=e.DeckVisuals),null!==e.DeckStability&&(this.DeckStability=e.DeckStability),null!==e.DeckSummary&&(this.DeckSummary=e.DeckSummary),null!==e.DeckBattery&&(this.DeckBattery=e.DeckBattery),null!==e.GFN&&(this.GFN=e.GFN),null!==e.DeckFPS&&(this.DeckFPS=e.DeckFPS),null!==e.Price&&(this.Price=e.Price),null!==e.BundlePrice&&(this.BundlePrice=e.BundlePrice),null!==e.SteamBackground&&(this.SteamBackground=e.SteamBackground),null!==e.AvgFPS&&(this.AvgFPS=e.AvgFPS),null!==e.CpuPwrAvg&&(this.CpuPwrAvg=e.CpuPwrAvg),null!==e.GpuPwrAvg&&(this.GpuPwrAvg=e.GpuPwrAvg),this.Bought=e.Bought,null==this.Steam&&null!=this.SteamId&&(this.Steam="https://store.steampowered.com/app/".concat(this.SteamId));let t=(null!=(e_=this.HlME)?e_:this.HlMS)?Math.round((null!=(eT=this.HlME)?eT:this.HlMS)/3600):null;null==t?this.HLGroup=null:t<=4?this.HLGroup="00 - 04 hrs":t<=8?this.HLGroup="05 - 08 hrs":t<=13?this.HLGroup="09 - 13 hrs":t<=16?this.HLGroup="14 - 16 hrs":t<=25?this.HLGroup="17 - 25 hrs":t<=35?this.HLGroup="26 - 35 hrs":t<=50?this.HLGroup="36 - 50 hrs":t<=80?this.HLGroup="51 - 80 hrs":this.HLGroup="80+ hrs";let l=this.Playtime?Math.round(this.Playtime/3600):null;if(null==l?this.PlaytimeGroup=null:l<=1?this.PlaytimeGroup="000 - 01 hrs":l<=5?this.PlaytimeGroup="002 - 05 hrs":l<=10?this.PlaytimeGroup="006 - 10 hrs":l<=20?this.PlaytimeGroup="011 - 20 hrs":l<=40?this.PlaytimeGroup="021 - 40 hrs":l<=70?this.PlaytimeGroup="041 - 70 hrs":l<=100?this.PlaytimeGroup="071 - 100 hrs":l<=150?this.PlaytimeGroup="101 - 150 hrs":l<=500?this.PlaytimeGroup="151 - 500 hrs":this.PlaytimeGroup="500+ hrs",null==this.CriticScore&&(this.CriticScoreGroup=null),null==this.CommunityScore&&(this.CommunityScoreGroup=null),null!=this.ReleaseDate&&""!=this.ReleaseDate)try{this.ReleaseMonth=this.ReleaseDate.split("/")[2]+"-"+this.ReleaseDate.split("/")[1].padStart(2,"0")}catch(e){console.log("Error parsing ReleaseDate for game ".concat(this.Name,": ").concat(this.ReleaseDate)),this.ReleaseMonth=""}if(null!=this.Added&&(this.Added=new Date(parseInt(this.Added.replace("/Date(","").replace(")/",""))),this.AddedMonth=this.Added.getFullYear()+"-"+(this.Added.getMonth()+1).toString().padStart(2,"0"),this.AddedYear=this.Added.getFullYear()),null!=this.DateBought){this.DateBought=new Date(parseInt(this.DateBought.replace("/Date(","").replace(")/","")));try{this.BoughtMonth=this.DateBought.getFullYear()+"-"+(this.DateBought.getMonth()+1).toString().padStart(2,"0")}catch(e){console.log("Error parsing DateBought for game ".concat(this.Name,": ").concat(this.DateBought)),this.BoughtMonth=""}}null!=this.LastActivity&&(this.LastActivity=new Date(parseInt(this.LastActivity.replace("/Date(","").replace(")/",""))),this.LastActivityYear=this.LastActivity.getFullYear()),"Xbox"==this.Source&&(this.Source="Xbox Game Pass"),null!=this.Reviews&&(this.Reviews>2e5?this.ReviewCategory=2e5:this.Reviews>5e4?this.ReviewCategory=5e4:this.Reviews>1e4?this.ReviewCategory=1e4:this.Reviews>1e3?this.ReviewCategory=1e3:this.Reviews>500?this.ReviewCategory=500:this.Reviews>150?this.ReviewCategory=150:this.Reviews>10?this.ReviewCategory=10:this.Reviews>0&&(this.ReviewCategory=1)),this.uri="plgame://"+this.Id+"?game="+encodeURI(this.GameId)+"&source="+encodeURI(null!=(eY=this.Source)?eY:"-1")+"&name="+encodeURI(this.Name),this.Features=(null==(B=this.Features)?void 0:B.replaceAll("Online Multiplayer:","Online"))||null,this.Features=(null==(A=this.Features)?void 0:A.replaceAll("Local Multiplayer:","Local"))||null,this.Features=(null==(G=this.Features)?void 0:G.replaceAll("LAN Multiplayer:","Local"))||null,this.Features=(null==(I=this.Features)?void 0:I.replaceAll("HDR available","HDR"))||null,this.Features=(null==(P=this.Features)?void 0:P.replaceAll("HDR Available","HDR"))||null,this.Features=(null==(M=this.Features)?void 0:M.replaceAll("Co-op","Co-Op"))||null;let i=new Map;null==(D=this.Features)||D.split("|").forEach(e=>{let t=e.toLowerCase().replace(/[- ]/g,"");i.has(t)||i.set(t,e)}),this.Features=Array.from(i.values()).join("|")||null,(null!=(eH=null==(E=this.Features)?void 0:E.indexOf("Local Co-op"))?eH:-1)>-1&&(null!=(eV=null==(O=this.Features)?void 0:O.indexOf("Local Versus"))?eV:-1)>-1?this.Coop="Co-Op & Versus":(null!=(eW=null==(R=this.Features)?void 0:R.indexOf("Local Co-op"))?eW:-1)>-1?this.Coop="Co-Op":(null!=(eU=null==(L=this.Features)?void 0:L.indexOf("Local Versus"))?eU:-1)>-1?this.Coop="Versus":(null!=(eq=null==(z=this.Tags)?void 0:z.indexOf("Local Co-op"))?eq:-1)>-1||(null!=(eX=null==(_=this.Tags)?void 0:_.indexOf("Local Multiplayer"))?eX:-1)>-1?(null!=(e$=null==(eJ=this.Features)?void 0:eJ.indexOf("Online Versus"))?e$:-1)>-1?this.Coop="Versus":(null!=(eZ=null==(eK=this.Features)?void 0:eK.toLowerCase().indexOf("co-op campaign"))?eZ:-1)>-1?this.Coop="Co-Op":this.Coop="Unknown":this.Coop=null;let r=null!=(eQ=null==(T=this.Features)?void 0:T.split("|"))?eQ:[];(null!=(e0=null==(Y=this.Features)?void 0:Y.indexOf("Local Co-Op: "))?e0:-1)>-1?this.LocalCoop="["+(null==(e4=r.find(e=>e.indexOf("Local Co-Op: ")>-1))?void 0:e4.replace("Local Co-Op: ","").replace(" Players",""))+"]":(null!=(e1=null==(H=this.Features)?void 0:H.indexOf(" Player Local"))?e1:-1)>-1?this.LocalCoop="["+(null==(e6=r.find(e=>e.indexOf(" Player Local")>-1))?void 0:e6.replace(" Player Local",""))+"]":(null!=(e8=null==(V=this.Features)?void 0:V.indexOf("Local 2-4"))?e8:-1)>-1?this.LocalCoop="[3 , 4]":(null!=(e2=null==(W=this.Features)?void 0:W.indexOf("Local 2"))?e2:-1)>-1?this.LocalCoop="[2]":(null!=(e3=null==(U=this.Features)?void 0:U.indexOf("Local 4-8"))?e3:-1)>-1?this.LocalCoop="[5, 6, 7, 8]":(null!=(e5=null==(q=this.Features)?void 0:q.indexOf("Local 8+"))?e5:-1)>-1&&(this.LocalCoop="[9]"),(null!=(e9=null==(X=this.Features)?void 0:X.indexOf("Online Co-Op: "))?e9:-1)>-1?this.OnlineCoop="["+(null==(ti=r.find(e=>e.indexOf("Online Co-Op: ")>-1))?void 0:ti.replace("Online Co-Op: ","").replace(" Players",""))+"]":(null!=(e7=null==(J=this.Features)?void 0:J.indexOf("Online 2-4"))?e7:-1)>-1?this.OnlineCoop="[3, 4]":(null!=(te=null==(K=this.Features)?void 0:K.indexOf("Online 2"))?te:-1)>-1?this.OnlineCoop="[2]":(null!=(tt=null==($=this.Features)?void 0:$.indexOf("Online 4-8"))?tt:-1)>-1?this.OnlineCoop="[5, 6, 7, 8]":(null!=(tl=null==(Z=this.Features)?void 0:Z.indexOf("Online 8+"))?tl:-1)>-1&&(this.OnlineCoop="[9]"),this.ReleaseYear=this.ReleaseDate?parseInt(this.ReleaseDate.split("/")[2]):null;let s=null==(Q=this.Tags)?void 0:Q.split("|").find(e=>e.includes("Steam Deck"));this.SteamDeck=null!=(tr=null==s?void 0:s.replace("Steam Deck ",""))?tr:null,this.Tags=null!=(ts=null==(ee=this.Tags)?void 0:ee.split("|").filter(e=>!e.includes("Steam Deck")).join("|"))?ts:null;let o=null!=(to=null==(et=this.Tags)?void 0:et.split("|"))?to:[],a=null!=(ta=null==(el=this.Features)?void 0:el.split("|"))?ta:[],n=["MMO","Split Screen","PvE","PvP","Co-Op","Co-op","Singleplayer","Versus","Single-player","Local ","LAN ","Online ","Multi-player","Multiplayer","Single Player","Online","Local","LAN PvP","LAN PvE","Shared/Split Screen","Shared/Split Screen PvP"],d=["Controller","Light Bar","Haptic","Adaptive Trigger","PlayStation","Full support"],c=o.filter(e=>n.some(t=>e.toLowerCase().includes(t.toLowerCase())));this.Tags=o.filter(e=>"Nonlinear"==e||"Import"==e||!n.some(t=>e.toLowerCase().includes(t.toLowerCase()))).join("|")||null;let u=a.filter(e=>"Unknown"!=e&&n.some(t=>e.toLowerCase().includes(t.toLowerCase()))),p=(a=a.filter(e=>!n.some(t=>e.toLowerCase().includes(t.toLowerCase())))).filter(e=>d.some(t=>e.toLowerCase().includes(t.toLowerCase())));this.Features=a.filter(e=>!d.some(t=>e.toLowerCase().includes(t.toLowerCase()))).join("|")||null,this.ControllerSupport=p.join("|")||null;let h=[...null!=c?c:[],...null!=u?u:[]],g=["Local Co-Op: ","Online Co-Op: "," Player Local","Unknown","FREE","Multiplayer: 2","Multiplayer: 4","Multiplayer: 8","OSX","Linux","Downloadable"];((h=(h=h.filter(e=>!g.some(t=>e.toLowerCase().includes(t.toLowerCase())))).map(e=>e.replace("Co-Op Extras: ",""))).includes("Single Player")||h.includes("Singleplayer")||h.includes("Single-player"))&&(h=h.filter(e=>"Single Player"!==e&&"Singleplayer"!==e&&"Single-player"!==e)).push("Single Player"),this.Coop&&("Co-op & Versus"===this.Coop?h.push("Co-Op","Versus"):h.push(this.Coop)),"?"!==this.LocalCoop&&h.push("Local: ".concat(this.LocalCoop)),"?"!==this.OnlineCoop&&h.push("Online: ".concat(this.OnlineCoop)),this.AddedBundle=this.Bundle?this.BoughtMonth+" "+this.Bundle:null!=(tn=null==(ei=this.BoughtMonth)?void 0:ei.split("-")[0])?tn:"";let m=new Map;h.forEach(e=>{let t=e.toLowerCase().replace(/[- ]/g,"");m.has(t)||m.set(t,e)}),h=Array.from(m.values()),this.Multi=h.filter(e=>"Unknown"!=e&&"Nonlinear"!=e&&"Import"!=e&&!e.includes("Local ")&&!e.includes("LAN ")&&!e.includes("Online ")).join("|"),this.Horror=((null!=(td=null==o||null==(er=o[0])?void 0:er.indexOf("Horror"))?td:-1)>-1||(null!=(tc=null==o||null==(es=o[0])?void 0:es.indexOf("Zombies"))?tc:-1)>-1&&(null!=(tu=null==o||null==(eo=o[1])?void 0:eo.indexOf("Horror"))?tu:-1)>-1)&&!(null==o?void 0:o.includes("2D"))&&!(null==o?void 0:o.includes("2.5D")),this.FPS=((null==o?void 0:o.includes("FPS"))||(null==o?void 0:o.includes("First-Person")))&&(null==(ea=this.Genres)?void 0:ea.includes("Shooter"))&&!(null==(en=this.Genres)?void 0:en.includes("Simulator"))&&!(null==o?void 0:o.includes("Third Person"))&&!(null!=(tp=null==o?void 0:o.slice(0,5))?tp:[]).includes("RPG")&&!(null!=(th=null==o?void 0:o.slice(0,5))?th:[]).includes("Role-playing (RPG)")&&!(null==o?void 0:o.includes("Third-Person Shooter"))&&!(null==o?void 0:o.includes("Puzzle Platformer"))||!1,this.CommunityScoreGroup=null!=this.CommunityScore?Math.min(10,Math.floor((null!=(tg=this.CommunityScore)?tg:0)/10)+1):null,this.CriticScoreGroup=null!=this.CriticScore?Math.min(10,Math.floor((null!=(tm=this.CriticScore)?tm:0)/10)+1):null,this.Souls=(null==o||null==(ed=o[0])?void 0:ed.includes("Souls-like"))||!1,this.Multiplayer=null!=this.Multi&&""!==this.Multi&&(null==(ec=this.Multi)?void 0:ec.split("|").filter(e=>"Single Player"!==e).length)>0,this.Adventure=!this.Hidden&&!(null==(eu=this.Features)?void 0:eu.includes("PassOld"))&&[null,"Not Played","Played"].indexOf(this.CompletionStatus)>-1&&(null!=(tf=null==o?void 0:o.indexOf("Resource Management"))?tf:-1)==-1&&(null!=(tx=null==o?void 0:o.indexOf("Management"))?tx:-1)==-1&&(null!=(tS=null==o?void 0:o.indexOf("Puzzle Platformer"))?tS:-1)==-1&&(null!=(ty=null==(ep=this.Genres)?void 0:ep.indexOf("Arcade"))?ty:-1)==-1&&(null!=(tv=null==o?void 0:o.indexOf("CRPG"))?tv:-1)==-1&&(null!=(tb=null==o?void 0:o.indexOf("Turn-Based"))?tb:-1)==-1&&(null!=(tC=null==(eh=this.Genres)?void 0:eh.indexOf("Sport"))?tC:-1)==-1&&(null!=(tw=null==o?void 0:o.indexOf("Roguelike"))?tw:-1)==-1&&((null!=(tj=null==o?void 0:o.indexOf("Point"))?tj:-1)>-1||(null!=(tk=null==(eg=this.Genres)?void 0:eg.indexOf("Point"))?tk:-1)>-1)&&((null!=(tN=null==(em=this.Tags)?void 0:em.indexOf("Hidden Object"))?tN:-1)==-1||(null!=(tF=this.ReviewCategory)?tF:0)>600)&&!this.Multiplayer,this.SinglePlayer=null==this.Multi||""===this.Multi||(null==(ef=this.Multi)?void 0:ef.indexOf("Single Player"))>-1,this.Colony=!this.Hidden&&!(null==(ex=this.Features)?void 0:ex.includes("PassOld"))&&((null!=(tB=null==o?void 0:o.indexOf("4X"))?tB:-1)>-1||(null!=(tA=null==o?void 0:o.indexOf("Colony Sim"))?tA:-1)>-1),this.Top=!this.Hidden&&!this.Horror&&!this.FPS&&!(null!=(tG=null==(eS=this.Features)?void 0:eS.includes("PassOld"))&&tG)&&(["","Not Played","Played"].indexOf(null!=(tI=this.CompletionStatus)?tI:"")>-1||null==this.CompletionStatus)&&((null!=(tP=this.CriticScore)?tP:-1)>=80||(null!=(tM=this.CriticScore)?tM:-1)>=75&&(null!=(tD=this.CommunityScore)?tD:-1)>=75||(null!=(tE=this.CommunityScore)?tE:-1)>=80&&(null!=(tO=this.CriticScore)?tO:1e3)>=70&&(null!=(tR=this.Reviews)?tR:-1)>1e3||this.Adventure&&(null!=(tL=this.CommunityScore)?tL:-1)>=70||this.Colony&&(null!=(tz=this.CommunityScore)?tz:-1)>=75)&&(-1===this.Multi.indexOf("MMO")||-1===this.Multi.indexOf("MMORPG")||-1===o.indexOf("Free to Play")&&-1===o.indexOf("Free-to-grind"))&&10!=this.ReviewCategory&&!this.Souls&&(null==o?void 0:o.indexOf("NSFW"))===-1&&(null==o?void 0:o.indexOf("Software"))===-1&&this.SinglePlayer&&!((null==(ey=this.Genres)?void 0:ey.includes("Sport"))&&!(null==(ev=this.Genres)?void 0:ev.includes("Arcade")))&&(this.Adventure||(null!=(t_=this.ReviewCategory)?t_:1e3)>400||(null!=(tT=this.ReleaseYear)?tT:0)>=new Date().getFullYear())&&("03"!=this.AgeRating&&"00"!=this.AgeRating||(null!=(tY=this.ReviewCategory)?tY:1001)>1e3)&&(null!=(tH=this.ReleaseYear)?tH:3e3)>=2008&&!((null==(eb=this.Genres)?void 0:eb.includes("Real Time Strategy (RTS)"))&&(null!=(tV=this.ReleaseYear)?tV:0)<2014&&!(null==(eC=this.Genres)?void 0:eC.includes("Platform")));let f=null!=(tU=null!=(tW=this.CommunityScore)?tW:this.CriticScore)?tU:70;if(null!=this.Reviews){let e=.5;this.Reviews>2e5?e=1.5:this.Reviews>5e4?e=1.25:this.Reviews>1e4?e=1:this.Reviews>5e3&&(e=.8),f=f*e*.9}else f*=.9;this.MaxScore=Math.max(null!=(tX=null!=(tq=this.CriticScore)?tq:f)?tX:70,f),null!=this.SteamId&&null!=this.SteamScreenshots&&(this.SteamScreenshots=null==(tJ=this.SteamScreenshots)?void 0:tJ.map(e=>"https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/"+e));let x=null!=(tK=null==(ew=this.Keywords)?void 0:ew.split("|"))?tK:[],S=o.map(e=>e.toLowerCase()),y=a.map(e=>e.toLowerCase());S.push(...y);let v=x.filter(e=>!S.includes(e));if(this.Keywords=v.join("|")||null,this.BestOnDeck=+(!!(parseInt(null!=(t$=this.DeckPerformance)?t$:"0")>=4&&parseInt(null!=(tZ=this.DeckControls)?tZ:"0")>=4)||(null!=(tQ=null==(ej=this.Categories)?void 0:ej.indexOf("Deck"))?tQ:-1)>-1),0==this.BestOnDeck){let e=["2D","2.5D","Top-Down","Pixel Graphics","Top-Down Shooter","2D Platformer","Text-Based","Board Game"];o.some(t=>e.indexOf(t)>-1)&&null!=this.ControllerSupport&&"None"!=this.ControllerSupport&&(this.BestOnDeck=1);var b,C,w,j,k,N,F,B,A,G,I,P,M,D,E,O,R,L,z,_,T,Y,H,V,W,U,q,X,J,K,$,Z,Q,ee,et,el,ei,er,es,eo,ea,en,ed,ec,eu,ep,eh,eg,em,ef,ex,eS,ey,ev,eb,eC,ew,ej,ek,eN,eF,eB,eA,eG,eI,eP,eM,eD,eE,eO,eR,eL,ez,e_,eT,eY,eH,eV,eW,eU,eq,eX,eJ,eK,e$,eZ,eQ,e0,e1,e8,e2,e3,e5,e4,e6,e9,e7,te,tt,tl,ti,tr,ts,to,ta,tn,td,tc,tu,tp,th,tg,tm,tf,tx,tS,ty,tv,tb,tC,tw,tj,tk,tN,tF,tB,tA,tG,tI,tP,tM,tD,tE,tO,tR,tL,tz,t_,tT,tY,tH,tV,tW,tU,tq,tX,tJ,tK,t$,tZ,tQ,t0,t1,t8,t2=(null==(t0=this.Keywords)?void 0:t0.toLowerCase().split("|"))||[],t3=e.map(e=>e.toLowerCase());t2.some(e=>t3.indexOf(e)>-1)&&null!=this.ControllerSupport&&"None"!=this.ControllerSupport&&(this.BestOnDeck=1);let t=["Indie"];(null==(t1=this.Genres)?void 0:t1.split("|").some(e=>t.indexOf(e)>-1))&&null!=this.ControllerSupport&&"None"!=this.ControllerSupport&&(this.BestOnDeck=1);let l=["2D","Pixel Graphics","Text-Based"];o.some(e=>l.indexOf(e)>-1)&&null!=this.ControllerSupport&&"None"!=this.ControllerSupport&&(this.DeckFPS="60"),(null!=(t8=this.ReleaseYear)?t8:0)<=2017&&null!=this.ControllerSupport&&"None"!=this.ControllerSupport&&(this.BestOnDeck=1)}this.FPS&&(this.BestOnDeck=0),1==this.BestOnDeck&&null!=this.DeckFPS&&(this.BestOnDeck=parseInt(null!=(b=this.DeckFPS)?b:"0")),this.BestOnDeck&&"Xbox Game Pass"==this.Source&&(null!=(C=null==(ek=this.Categories)?void 0:ek.indexOf("Mouse"))?C:-1)==-1&&(null!=(w=null==(eN=this.Categories)?void 0:eN.indexOf("Gamepad"))?w:-1)==-1?this.Deck="Win Deck":this.BestOnDeck&&(null!=(j=null==(eF=this.Categories)?void 0:eF.indexOf("Mouse"))?j:-1)==-1&&(null!=(k=null==(eB=this.Categories)?void 0:eB.indexOf("Gamepad"))?k:-1)==-1?this.Deck="Steam Deck":(null!=this.ControllerSupport||(null!=(N=null==(eA=this.Categories)?void 0:eA.indexOf("Gamepad"))?N:-1)>-1)&&(null!=(F=null==(eG=this.Categories)?void 0:eG.indexOf("Mouse"))?F:-1)==-1?this.Deck="Gamepad":this.Deck="Mouse",this.TV=!this.BestOnDeck&&null!=this.ControllerSupport&&"None"!=this.ControllerSupport&&!this.FPS&&-1==o.indexOf("Base Building")&&-1==o.indexOf("City Builder")&&-1==o.indexOf("Colony Sim")&&-1==o.indexOf("Farming Sim")&&-1==o.indexOf("4X"),this.Desk=!this.TV&&!this.BestOnDeck}constructor(){this.OtherSources=[],this.Coop=null,this.LocalCoop="?",this.OnlineCoop="?",this.SteamDeck=null,this.ControllerSupport=null,this.Deck="PC",this.LowestPrice=null,this.DeckPerformance=null,this.DeckControls=null,this.DeckVisuals=null,this.DeckStability=null,this.DeckSummary=null,this.DeckBattery=null,this.DeckFPS=null,this.HLGroup=null,this.CategoryHours=null,this.AddedBundle=null,this.Bundles=[],this.Bundle="",this.BestOnDeck=0,this.Bought=!1,this.Price=null,this.BundlePrice=null,this.DateBought=null,this.Keywords=null,this.AvgFPS=null,this.CpuPwrAvg=null,this.GpuPwrAvg=null,this.PlaytimeGroup=null,this.AddedYear=null,this.GFN=null,this.AgeRating=null,this.Age=null,this.Android=!1,this.TV=!1,this.Mouse=!1,this.IGDBId=null,this.OpenCriticScore=null,this.IGDBCriticScore=null,this.IGDBCommunityScore=null,this.PLCommunityScore=null,this.PLCriticScore=null,this.NotInPlaynite=null,this.CoverUrl=null,this.Desk=!1,this.MaxScore=null,this.Colony=!1,this.Multiplayer=!1,this.SinglePlayer=!1,this.Adventure=!1,this.Top=!1,this.Horror=!1,this.FPS=!1,this.Souls=!1,this.Hidden=!1,this.Greek=!1,this.CommunityScore=null,this.ReleaseDate="",this.SubGames=[],this.IsInstalled=!1,this.Playtime=0,this.SteamPlaytime=0,this.InstallSize=null,this.CriticScore=null,this.Tags="",this.Multi="",this.Genres="",this.Features="",this.Categories="",this.Source="",this.CompletionStatus="",this.CriticScoreGroup=10,this.CommunityScoreGroup=10,this.ReleaseYear=null,this.LastActivity=null,this.Notes=null,this.Steam=null,this.SteamId=null,this.SteamScreenshots=[],this.SteamBackground=null,this.HlMS=null,this.HlME=null,this.HLC=null,this.Reviews=null,this.PlayerCount=null,this.avgfps=null,this.minfps=null,this.maxfps=null,this.cpupwravg=null,this.cpupwrmin=null,this.cpupwrmax=null,this.gpupwravg=null,this.gpupwrmin=null,this.gpupwrmax=null,this.cputempavg=null,this.cputempmin=null,this.cputempmax=null,this.gputempavg=null,this.gputempmin=null,this.gputempmax=null,this.mobotempavg=null,this.mobotempmin=null,this.mobotempmax=null,this.totpwravg=null,this.totpwrmin=null,this.totpwrmax=null,this.cpuutilavg=null,this.cpuutilmin=null,this.cpuutilmax=null,this.gpuutilavg=null,this.gpuutilmin=null,this.gpuutilmax=null,this.vramutilavg=null,this.vramutilmin=null,this.vramutilmax=null,this.id=null,this.Id="",this.GameId="",this.Name="",this.uri="",this.Uri="",this.ReviewCategory=null,this.LastActivityYear=null,this.ReleaseMonth="",this.AddedMonth="",this.BoughtMonth="",this.Added=""}}var u=l(1772),p=l(582),h=l(9099),g=l(1041),m=l(8614);let f=JSON.parse('{"R0":[[{"title":"Installed","icon":"faHdd","color":"#ADD8E6","sortField":"LastActivity","groupField":"Deck","take":1000,"filterString":"installed && not_hidden && not_wishlist && in_playnite"}],[{"title":"Top","icon":"faTrophy","color":"#90EE90","sortField":"MaxScore","groupField":"ReleaseYear","take":300,"filterString":"not_wishlist && in_playnite && top && not_completed"},{"title":"Not Completed","icon":"faXmark","color":"#F08080","sortField":"CriticScore","groupField":"CriticScoreGroup,CommunityScoreGroup","take":300,"filterString":"not_hidden && not_top && not_wishlist && in_playnite && not_passold && recent(2007) && singleplayer && not_completed && critic_at_least(80)"},{"title":"HLGroup","icon":"faHourglassHalf","color":"#D8BFD8","sortField":"Added","groupField":"HLGroup","take":300,"filterString":"top"},{"title":"Everything","icon":"faGripHorizontal","color":"#FFD700","sortField":"Added","groupField":"AddedMonth","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold"},{"title":"Popular","icon":"faFire","color":"#FFFFE0","sortField":"Reviews","groupField":"ReviewCategory","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && recent(2007) && singleplayer && not_completed && critic_at_least(80) && reviewcat_gt(10)"},{"title":"Baby","icon":"faBaby","color":"#84dcdfff","sortField":"MaxScore","groupField":"AgeRating","take":300,"filterString":"not_hidden && not_wishlist && in_playnite"}],[{"title":"Completed","icon":"faCheckCircle","color":"#D8BFD8","sortField":"LastActivity","groupField":"CategoryHours,CompletionStatus","take":1000,"filterString":"not_hidden && not_wishlist && in_playnite && completed"},{"title":"Playtime","icon":"faClock","color":"#FFA500","sortField":"Playtime","groupField":"PlaytimeGroup","take":1000,"filterString":"not_hidden && not_wishlist && in_playnite && playtime_positive && not_passold"},{"title":"Bought","icon":"faDollarSign","color":"#a9b13dff","sortField":"DateBought","groupField":"AddedBundle","take":1000,"filterString":"not_hidden && not_wishlist && in_playnite && source_steam_or_name_RDR2 && price_not_zero && not_borrowed && not_freetoplay && notes_null"},{"title":"Wishlist","icon":"faShoppingCart","color":"#87CEEB","sortField":"Added","groupField":"ReleaseYear","take":300,"filterString":"wishlist && not_hidden"}],[{"title":"FriendShared","icon":"faUserGroup","color":"#FFB6C1","sortField":"Added","groupField":"BoughtMonth","take":300,"filterString":"borrowed && not_wishlist && in_playnite && notes_not_null && not_completed"},{"title":"Game Pass","icon":"faXbox","color":"#98FB98","sortField":"Added","groupField":"BoughtMonth","take":300,"filterString":"source_gamepass && not_wishlist && in_playnite && not_passold"},{"title":"GFN","icon":"faCloudArrowDown","color":"#055c02ff","sortField":"Added","groupField":"AddedMonth","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && gfn_not_null && not_completed"}],[{"title":"TV","icon":"faTv","color":"#E0FFFF","sortField":"ReleaseYear","groupField":"ReleaseYear","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && tv && not_completed"},{"title":"Desk","icon":"faMouse","color":"#E0FFFF","sortField":"ReleaseYear","groupField":"ReleaseYear","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && desk && not_completed"},{"title":"Steam Deck","icon":"faCar","color":"#E0FFFF","sortField":"ReleaseYear","groupField":"ReleaseYear","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && best_on_deck && not_completed"},{"title":"Android","icon":"faAndroid","color":"#A9A9A9","sortField":"CommunityScore","groupField":"CriticScoreGroup","take":300,"filterString":"not_hidden && not_wishlist && in_playnite && android && not_passold"}],[{"title":"4x","icon":"faChessBoard","color":"#D2B48C","sortField":"CommunityScore","groupField":"ReleaseYear","take":1000,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && tag_in(\'4X\',\'Colony Sim\')"},{"title":"Co-op","icon":"faHandshake","color":"#FF69B4","sortField":"CommunityScore","groupField":"LocalCoop","take":1000,"filterString":"not_hidden && not_wishlist && in_playnite && not_passold && coop && not_completed"},{"title":"Adventures","icon":"faMousePointer","color":"#B0C4DE","sortField":"CommunityScore","groupField":"ReleaseYear","take":300,"filterString":"not_hidden && adventure && not_wishlist && in_playnite"}]]}'),x={faShoppingCart:g._Ro,faHdd:g.MBK,faDownload:g.cbP,faTrophy:g.iHh,faXmark:g.Jyw,faHourglassHalf:g.TuH,faGripHorizontal:g.UjL,faFire:g.kNw,faCheckCircle:g.SGM,faClock:g.a$,faDollarSign:g.Vpi,faUserGroup:g.USd,faCloudArrowDown:g.sAM,faGamepad:g.Rbk,faChessBoard:g.SAk,faCity:g.n0K,faHandshake:g.Z8x,faMap:g.e5w,faMousePointer:g.ii0,faBaby:g.OIP,faMobile:g.GrJ,faXbox:m.PJF,faCar:g.mrs,faAndroid:m.VL8,faMouse:g.b0k,faTv:g.UoT},S={installed:e=>!!e.IsInstalled,in_playnite:e=>{var t;return!(null!=(t=e.NotInPlaynite)&&t)},not_playnite:e=>null==e.IGDBId,tv:e=>{var t;return null!=(t=e.TV)&&t},desk:e=>{var t;return null!=(t=e.Desk)&&t},not_hidden:e=>!e.Hidden,not_wishlist:e=>!(e.Categories&&e.Categories.includes("Wishlist")),wishlist:e=>!!(e.Categories&&e.Categories.includes("Wishlist")),top:e=>!!e.Top,not_top:e=>!e.Top,not_passold:e=>!(e.Features&&e.Features.toLowerCase().includes("passold")),recent:(e,t)=>{var l;return(null!=(l=e.ReleaseYear)?l:-1)>=Number(t||-1)},singleplayer:e=>{var t,l;return null!=(l=null==(t=e.Multi)?void 0:t.toLowerCase().includes("single player"))&&l},not_completed:e=>[null,"Not Played","Played"].indexOf(e.CompletionStatus)>-1,critic_at_least:(e,t)=>(e.CriticScore||100)>=Number(t||0),reviewcat_gt:(e,t)=>{var l;return(null!=(l=e.ReviewCategory)?l:0)>Number(t||0)},completed:e=>["⭐","⭐⭐","⭐⭐⭐","⭐⭐⭐⭐","⭐⭐⭐⭐⭐","Abandoned","Beaten","Completed"].indexOf(e.CompletionStatus||"-1")>-1,playtime_positive:e=>null!=e.Playtime&&e.Playtime>0,price_not_zero:e=>"0.00"!=e.Price,not_borrowed:e=>!(e.Features&&e.Features.toLowerCase().includes("borrowed")),not_freetoplay:e=>!(e.Tags&&e.Tags.toLowerCase().includes("free to play")),notes_null:e=>null==e.Notes,borrowed:e=>null!=e.Features&&e.Features.toLowerCase().includes("borrowed"),notes_not_null:e=>null!=e.Notes,source_gamepass:e=>["Xbox Game Pass","Xbox","EA Pass","Ubisoft Connect","EA App"].indexOf(e.Source||"-1")>-1,gfn_not_null:e=>null!=e.GFN,best_on_deck:e=>e.BestOnDeck>0,android:e=>{var t;return!!(null!=(t=e.Android)&&t)},tag_in:function(e){for(var t=arguments.length,l=Array(t>1?t-1:0),i=1;i<t;i++)l[i-1]=arguments[i];return!!(e.Tags&&l.some(t=>e.Tags.indexOf(t)>-1))},coop:e=>!!e.Coop,adventure:e=>!!e.Adventure,tag_contains:(e,t)=>!!(e.Tags&&e.Tags.indexOf(t)>-1),source_steam_or_name_RDR2:e=>"Steam"==e.Source||"Red Dead Redemption 2"==e.Name},y=(f.R0||[]).map(e=>e.map(e=>({title:e.title,icon:x[e.icon]||x.faGripHorizontal,color:e.color,sortField:e.sortField,groupField:e.groupField,take:e.take,filterString:e.filterString,filterFn:function(e){if(!e)return;let t=e.trim().split(/\s*&&\s*/),l=[];for(let e of t){let t=e.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\((.*)\)$/);if(t){let e=t[1],i=t[2],r=i.length?i.split(/\s*,\s*/).map(e=>e.replace(/^\s*['\"]?|['\"]?\s*$/g,"")):[],s=S[e];s?l.push(e=>s(e,...r)):console.warn("Unknown preset function in filterString:",e)}else{let t=e.trim(),i=S[t];i?l.push(e=>i(e)):console.warn("Unknown preset token in filterString:",t)}}if(l.length)return e=>{try{return l.every(t=>!!t(e))}catch(e){return!1}}}(e.filterString)})));function v(e){let{candidates:t,className:l,alt:r,loading:s="lazy",decoding:a="async",fetchPriority:n,width:d,height:c}=e,[u,p]=(0,o.useState)(0);(0,o.useEffect)(()=>{p(0)},[t.join("|")]);let h=t[u];return(0,i.jsx)("img",{className:l,src:h,alt:r||"",loading:s,decoding:a,fetchPriority:n,width:d,height:c,onError:()=>{p(e=>e<t.length-1?e+1:e)}},u)}let b=o.memo(function(e){var t,l,r,s,a,n,c;let{item:u,isGamepad:p,moreInfo:h,GetToolTip:g,Button:m,gameMapRef:f}=e,x=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(f)return f.current.set(u.Id,u),()=>{f.current.delete(u.Id)}},[u.Id,f]);let S=(0,o.useMemo)(()=>p?{width:300}:void 0,[p]),y=(0,o.useMemo)(()=>u.SubGames&&0!==u.SubGames.length?u.SubGames.slice().sort((e,t)=>{var l,i;return(null!=(l=t.Playtime)?l:0)-(null!=(i=e.Playtime)?i:0)}):null,[u.SubGames]),b=(0,o.useMemo)(()=>{var e;return null==(e=u.CoverUrl)?void 0:e.replace("t_thumb","t_cover_big")},[u.Id]),C=(0,o.useMemo)(()=>"ico/"+u.Source+".png",[u.Source]),w=(0,o.useMemo)(()=>"Bought"==m?Number.isFinite(Number(u.Price))?"€".concat(Number(u.Price)):u.Price:"Wishlist"==m&&null!=u.LowestPrice&&"-1.00"!=u.LowestPrice?"€".concat(u.LowestPrice):null,[u.Price,m]),j=(0,o.useMemo)(()=>{try{var e;return(null!=(e=null==u?void 0:u.Multi)?e:"").toLowerCase().indexOf("co-op campaign")>-1?"green":"gray"}catch(e){return"gray"}},[u.Multi]),k=(0,o.useMemo)(()=>{var e;let t=parseInt(null!=(e=u.DeckFPS)?e:"0");return t<30?"#555":t<40?"#fa8806ff":t<60?"#87f89aff":"#15ff00ff"},[u.DeckFPS]),N=(0,o.useMemo)(()=>{var e;return Math.round((null!=(e=u.InstallSize)?e:0)*100/1024/1024/1024)/100},[u.InstallSize]),F=(0,o.useMemo)(()=>Math.round(u.Playtime/3600),[u.Playtime]),B=(0,o.useMemo)(()=>{var e;return Math.round((null!=(e=u.HlME)?e:0)/3600)},[u.HlME]);return(0,i.jsxs)("div",{ref:x,"data-game-id":u.Id,style:S,className:"k-card",children:[p&&(0,i.jsxs)("div",{className:"gamepad-overlay",children:[(0,i.jsx)("div",{className:"gamepad-overlay-title",children:u.Name}),(0,i.jsx)("div",{className:"gamepad-overlay-actions",children:"A: Open \xb7 X: Steam"})]}),(0,i.jsxs)("a",{href:null!=(l=null!=(t=u.Steam)?t:u.IGDBId)?l:"",target:"_blank",rel:"noopener noreferrer",children:[(0,i.jsxs)("div",{className:"li-relative",children:[u.Top&&(0,i.jsx)(d.gt3,{className:"li-star"}),(0,i.jsx)("div",{role:"link",onClick:()=>{u.uri&&window.open(u.uri,"_blank","noopener")},style:{display:"inline-block",cursor:u.uri?"pointer":"default"},children:(0,i.jsx)("img",{className:"imgOverlay",src:C,loading:"lazy"})}),u.GFN&&(0,i.jsx)("div",{role:"link",onClick:()=>window.open("https://play.geforcenow.com/games?game-id=".concat(u.GFN),"_blank","noopener"),style:{display:"inline-block",cursor:"pointer"},children:(0,i.jsx)("img",{className:"imgOverlay li-img-gfn",src:"ico/gfn.png",loading:"lazy"})}),y?(0,i.jsx)("div",{className:"li-subgames-grid",children:y.map((e,t)=>{var l;return(0,i.jsx)(v,{className:"li-subimg",width:180,height:270,candidates:[e.SteamId?"https://cdn.cloudflare.steamstatic.com/steam/apps/".concat(e.SteamId,"/library_600x900.jpg"):"",(null==(l=e.CoverUrl)?void 0:l.replace("t_thumb","t_cover_big"))||"","img/".concat(e.Id,".jpg")].filter(Boolean),loading:"eager",decoding:"async",fetchPriority:"high"},t)})}):(0,i.jsx)(v,{className:"k-card-media li-cover",width:180,height:270,candidates:[u.SteamId?"https://cdn.cloudflare.steamstatic.com/steam/apps/".concat(u.SteamId,"/library_600x900.jpg"):"",b||"","img/".concat(u.Id,".jpg")].filter(Boolean),loading:"eager",decoding:"async",fetchPriority:"high"}),w&&(0,i.jsx)("div",{className:"priceTag li-priceTag",children:w}),u.Notes&&(0,i.jsx)("div",{className:"libOverlay",children:u.Notes}),"Bought"==m&&u.Bundles.length>0&&(0,i.jsx)("div",{className:"libCoopCampaign",children:(0,i.jsx)(d.YBB,{})}),("Co-op"===u.Coop||"Co-op & Versus"===u.Coop||(null==u?void 0:u.BestOnDeck)||u.ControllerSupport)&&"Bought"!=m&&(0,i.jsxs)("div",{className:"libCoopCampaign",children:[("Co-op"===u.Coop||"Co-op & Versus"===u.Coop)&&(0,i.jsx)(d.YXz,{style:{color:j}}),(null==u?void 0:u.BestOnDeck)>0&&(0,i.jsx)(d.Y4E,{style:{color:k,opacity:.6,fontSize:"0.9em"}}),(null==u?void 0:u.ControllerSupport)!=null&&(0,i.jsx)(d.pBr,{})]})]}),h&&(0,i.jsxs)("span",{className:"infoSpan",children:[(0,i.jsxs)("span",{children:[N,"gb"]}),(0,i.jsxs)("span",{className:"midspan",children:[F,"h",(0,i.jsx)("span",{className:"k-icon k-font-icon k-i-clock"}),B,"h"]}),(0,i.jsxs)("span",{children:[u.CriticScore,(0,i.jsx)("span",{className:"k-icon k-font-icon k-i-star"}),u.CommunityScore,"%"]})]}),h&&(u.ReleaseYear||u.AddedYear)&&(0,i.jsxs)("span",{className:"infoSpan li-info-margin",children:[u.ReleaseYear&&(0,i.jsx)("span",{children:u.ReleaseYear}),u.AddedYear&&(0,i.jsxs)("span",{children:[" \xa0+",u.AddedYear]})]}),h&&((null!=(r=u.AvgFPS)?r:0)>0||(null!=(s=u.CpuPwrAvg)?s:0)>0)&&(0,i.jsxs)("span",{className:"infoSpan li-info-margin",children:[(0,i.jsxs)("span",{children:[Math.round(null!=(a=u.AvgFPS)?a:0)," fps"]}),(0,i.jsx)("span",{className:"midspan",children:Math.round(null!=(n=u.CpuPwrAvg)?n:0)}),(0,i.jsx)("span",{children:Math.round(null!=(c=u.GpuPwrAvg)?c:0)})]})]})]})});function C(e,t,l){return(0,i.jsxs)("div",{className:"k-listview-item",children:[(0,i.jsx)("h4",{className:"k-group-title",children:e}),(0,i.jsx)("div",{className:"cards",children:t.map(e=>(0,i.jsx)(b,{item:e,isGamepad:l.isGamepad,moreInfo:l.moreInfo,GetToolTip:l.GetToolTip,Button:l.but,gameMapRef:l.gameMapRef},e.Id))})]},e)}function w(e,t,l){let i="asc"===l?1:-1;return e.sort((e,t)=>{var l,r;let s=String(null!=(l=e.key)?l:""),o=String(null!=(r=t.key)?r:""),a="Ungrouped"===s||66===s.charCodeAt(0)&&67===s.charCodeAt(1),n="Ungrouped"===o||66===o.charCodeAt(0)&&67===o.charCodeAt(1);return a&&!n?1:!a&&n?-1:e.key<t.key?-1*i:e.key>t.key?+i:0})}function j(e){let{games:t,group:l,skip:r,take:s}=e,o=()=>"undefined"!=typeof performance&&performance.now?performance.now():Date.now();return(0,i.jsx)(i.Fragment,{children:function(t,l,r,s){if(null==l||0===l.length)return null;if(o(),2===l.length){let o=new Map;t.forEach(e=>{let t=e[l[0].field]||"Ungrouped",i=e[l[1].field]||"Ungrouped";o.has(t)||o.set(t,new Map);let r=o.get(t);r.has(i)||r.set(i,[]),r.get(i).push(e)});let a=[];o.forEach((e,t)=>{let l=[];e.forEach((e,t)=>{l.push({key:t,items:e})}),a.push({key:t,items:l})});let n=Object.values(a);w(n,l[0].field,l[0].dir),n.forEach(e=>{e.items=w(e.items,l[1].field,l[1].dir)});let d=0,c=[];for(let e of n){let t=[];for(let l of e.items){let e=l.items.length;if(d+e<=r)d+=e;else if(d>=r+s)break;else t.push(l),d+=e}if(t.length>0&&c.push({key:e.key,items:t}),d>=r+s)break}return c.map(t=>{var l,r;return l=t.key,r=t.items,r.length>0&&r[0].hasOwnProperty("items")?(0,i.jsxs)("div",{className:"k-listview-item",style:{overflow:"hidden"},children:[(0,i.jsx)("div",{className:"sep",children:l}),r.sort((e,t)=>t.key.length-e.key.length).map(t=>C(t.key,t.items,e))]},l):C(r[0].key,r[0].items,e)})}{if(0===l.length)return null;let i=new Map;t.forEach(e=>{let t=e[l[0].field]||"Ungrouped";i.has(t)||i.set(t,[]),i.get(t).push(e)});let o=w(Array.from(i,e=>{let[t,l]=e;return{key:t,items:l}}),l[0].field,l[0].dir),a=0,n=0,d=o.length;for(let e=0;e<o.length;e++){let t=o[e].items.length;if(a+t<=r)a+=t,n=e+1;else if(a>=r+s){d=e;break}else a+=t}return o.slice(n,d).map(t=>C(t.key,t.items,e))}}(t,l,r,s)})}var k=l(1454);function N(e){if(null==e||0===e)return"0h";let t=Math.floor(e/3600);return(t>0?t+"h ":"")+Math.floor(e%3600/60)+"m"}function F(e){return e?Math.round(100*e/1024/1024/1024)/100+" GB":""}function B(e){if(!e)return"";let t=new Date(e);if(isNaN(t.getTime()))return e.toString();let l=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(l,"/").concat(i,"/").concat(r)}function A(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.SubGames&&e.SubGames.length>0?(0,k.qV)(I(e)):(0,k.qV)(P(e,t))}let G=o.memo(e=>{let{item:t,singleColumn:l=!1}=e;return t.SubGames&&t.SubGames.length>0?I(t):P(t,l)},(e,t)=>e.item.Id===t.item.Id&&e.singleColumn===t.singleColumn);function I(e){var t,l;let r=e.SubGames.reduce((e,t)=>e+(t.Playtime||0),0),s=e.SubGames.reduce((e,t)=>e+(t.InstallSize||0),0),o=e.SubGames.filter(e=>e.IsInstalled).length;return(0,i.jsx)("div",{className:"tt-tooltip",children:(0,i.jsx)("div",{className:"tt-row",children:(0,i.jsx)("div",{className:"tt-left",children:(0,i.jsx)("table",{className:"tt-table",children:(0,i.jsxs)("tbody",{children:[(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,children:(0,i.jsxs)("div",{className:"image-container",children:[(0,i.jsx)("img",{className:"background-image",src:"back/".concat(e.Id,".jpg"),loading:"lazy"}),(0,i.jsx)("img",{className:"logo-image",src:"logo/".concat(e.Id,".png"),loading:"lazy"})]})})}),(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{colSpan:4,children:[(0,i.jsx)("br",{}),(0,i.jsxs)("h3",{style:{margin:"0 0 5px 0"},children:[e.Name," ",(0,i.jsx)("span",{style:{fontSize:"0.8em",color:"#888"},children:"(Bundle)"})]})]})}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"tt-td-pad",children:[(0,i.jsx)("i",{className:"fas fa-gamepad"})," ",(0,i.jsx)("strong",{children:"Games:"})]}),(0,i.jsx)("td",{className:"tt-td-pad",children:e.SubGames.length}),(0,i.jsxs)("td",{className:"tt-td-pad",children:[(0,i.jsx)("i",{className:"fas fa-download"})," ",(0,i.jsx)("strong",{children:"Installed:"})]}),(0,i.jsx)("td",{className:"tt-td-pad",children:o})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"tt-td-pad",children:[(0,i.jsx)("i",{className:"fas fa-clock"})," ",(0,i.jsx)("strong",{children:"Total Playtime:"})]}),(0,i.jsx)("td",{className:"tt-td-pad",children:N(r)}),(0,i.jsxs)("td",{className:"tt-td-pad",children:[(0,i.jsx)("i",{className:"fas fa-hdd"})," ",(0,i.jsx)("strong",{children:"Total Size:"})]}),(0,i.jsx)("td",{className:"tt-td-pad",children:F(s)})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"tt-td-pad",children:[(0,i.jsx)("i",{className:"fas fa-hourglass-half"})," ",(0,i.jsx)("strong",{children:"Added:"})]}),(0,i.jsx)("td",{className:"tt-td-pad",children:B(e.Added)}),(0,i.jsxs)("td",{className:"tt-td-pad",children:[(0,i.jsx)("i",{className:"fas fa-dollar"})," ",(0,i.jsx)("strong",{children:"Price:"})]}),(0,i.jsx)("td",{className:"tt-td-pad",children:null!=(l=null!=(t=e.Price)?t:e.BundlePrice)?l:""})]}),(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,style:{paddingTop:"10px"},children:(0,i.jsx)("strong",{children:"Games in Bundle:"})})}),e.SubGames.map(e=>(0,i.jsx)("tr",{style:{borderBottom:"1px solid #444"},children:(0,i.jsx)("td",{colSpan:4,className:"tt-td-pad-lg",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,i.jsx)("img",{src:"img/".concat(e.Id,".jpg"),loading:"lazy",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"}}),(0,i.jsxs)("div",{style:{fontSize:"1.4em",flex:1},children:[(0,i.jsx)("strong",{children:e.Name}),(0,i.jsxs)("div",{style:{fontSize:"0.8em",color:"#aaa",marginTop:"2px"},children:[(0,i.jsx)("span",{children:e.IsInstalled?"✓ Installed":"○ Not Installed"}),e.Playtime&&e.Playtime>0&&" • Playtime: ".concat(N(e.Playtime)),e.InstallSize&&" • Size: ".concat(F(e.InstallSize)),e.CommunityScore&&" • ⭐ ".concat(e.CommunityScore)]})]})]})})},e.Id))]})})})})})}function P(e){var t,l,r,s;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e=>{if(null!=e){if("number"==typeof e)return Math.max(0,Math.min(5,e));if("string"==typeof e){let t=e.match(/(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)/);if(t){let e=Number(t[1]),l=Number(t[2])||1;if(!isNaN(e)&&!isNaN(l)&&l>0)return Math.max(0,Math.min(5,e/l*5))}let l=e.match(/^(\d+(?:\.\d+)?)\s*%?$/);if(l){let e=Number(l[1]);if(!isNaN(e))return Math.max(0,Math.min(5,e/100*5))}let i=e.trim().toLowerCase(),r={excellent:5,"very good":5,great:5,good:4,ok:3,okay:3,average:3,poor:2,bad:1};if(void 0!==r[i])return r[i];let s=e.match(/(\d+(?:\.\d+)?)/);if(s){let e=Number(s[1]);if(!isNaN(e))return e<=5?e:e<=10?e/10*5:e<=100?e/100*5:Math.max(0,Math.min(5,e))}}}},n=e=>{let t=a(e);if(null==t)return(0,i.jsx)("span",{style:{color:"#fff"},children:String(e)});let l=Math.floor(t),r=t-l>=.5,s=[];for(let e=0;e<l;e++)s.push((0,i.jsx)("i",{className:"fas fa-star",style:{color:"#f1c40f",marginRight:"3px"}},"s"+e));r&&s.push((0,i.jsx)("i",{className:"fas fa-star-half-alt",style:{color:"#f1c40f",marginRight:"3px"}},"half"));let o=5-l-!!r;for(let e=0;e<o;e++)s.push((0,i.jsx)("i",{className:"far fa-star",style:{color:"#666",marginRight:"3px"}},"e"+e));return(0,i.jsx)("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:s})},d=(e,t,l,r)=>{if(!l||0===l.trim().length)return null;let s=(()=>{switch(r){case"genres":return{bg:"rgba(155, 107, 209, 0.15)",border:"#9b6bd1",text:"#c99ee6"};case"tags":default:return{bg:"rgba(107, 155, 209, 0.15)",border:"#6b9bd1",text:"#8fb3d9"};case"keywords":return{bg:"rgba(206, 62, 62, 0.15)",border:"#ce3e3e",text:"#e08f8f"};case"features":return{bg:"rgba(107, 209, 143, 0.15)",border:"#6bd18f",text:"#8ee0ae"};case"categories":return{bg:"rgba(209, 168, 107, 0.15)",border:"#d1a86b",text:"#e0be8f"};case"multi":return{bg:"rgba(107, 199, 209, 0.15)",border:"#6bc7d1",text:"#8fd9e0"};case"controller":return{bg:"rgba(209, 107, 143, 0.15)",border:"#d16b8f",text:"#e08fae"}}})();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,className:"tt-td-pad-lg",children:(0,i.jsx)("div",{className:"tt-badge-row",children:l.split("|").map((e,l)=>(0,i.jsx)("span",{className:"tt-badge",style:{background:s.bg,border:"1px solid ".concat(s.border),color:s.text},children:e.trim()},t+"_"+l))})})})})},c=(e,t,l)=>{let r=l.flatMap(e=>{if(!e.values)return[];let t=e.delimiter||"|";return(Array.isArray(e.values)?e.values.join(t):e.values).split(t).map(t=>({value:t.trim(),colorScheme:e.colorScheme})).filter(e=>e.value.length>0)});if(0===r.length)return null;let s=e=>{switch(e){case"features":return{bg:"rgba(107, 209, 143, 0.15)",border:"#6bd18f",text:"#8ee0ae"};case"multi":return{bg:"rgba(107, 199, 209, 0.15)",border:"#6bc7d1",text:"#8fd9e0"};case"keywords":return{bg:"rgba(206, 62, 62, 0.15)",border:"#ce3e3e",text:"#e08f8f"};case"controller":return{bg:"rgba(209, 107, 143, 0.15)",border:"#d16b8f",text:"#e08fae"};case"categories":return{bg:"rgba(209, 168, 107, 0.15)",border:"#d1a86b",text:"#e0be8f"};case"sources":return{bg:"rgba(209, 200, 107, 0.15)",border:"#d1c86b",text:"#e0d88f"};case"library":return{bg:"rgba(142, 107, 209, 0.15)",border:"#8e6bd1",text:"#ae8fe0"};case"bundles":return{bg:"rgba(209, 143, 107, 0.15)",border:"#d18f6b",text:"#e0ae8f"};default:return{bg:"rgba(107, 155, 209, 0.15)",border:"#6b9bd1",text:"#8fb3d9"}}},o=r.filter((e,t,l)=>l.findIndex(t=>t.value===e.value)===t);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,className:"tt-td-pad-lg",children:(0,i.jsx)("div",{className:"tt-badge-row",children:o.map((e,t)=>{let l=s(e.colorScheme);return(0,i.jsx)("span",{className:"tt-badge",style:{background:l.bg,border:"1px solid ".concat(l.border),color:l.text},children:e.value},t)})})})})})},u=[e.HlMS,e.HlME,e.HLC].filter(e=>null!=e).map(e=>Math.round(e/3600)).join(" / ")+(e.HlMS||e.HlME||e.HLC?" hrs":""),p=null!=e.AvgFPS||null!=e.CpuPwrAvg||null!=e.GpuPwrAvg&&0!=e.GpuPwrAvg,h=!!(e.SteamDeck||e.DeckPerformance||e.DeckControls||e.DeckVisuals||e.DeckStability||e.DeckSummary||e.DeckBattery||e.DeckFPS);return(0,i.jsxs)("div",{className:"tt-tooltip",children:[(0,i.jsxs)("div",{className:"tt-row ".concat(o?"column":""),children:[(0,i.jsx)("div",{className:"tt-left",children:(0,i.jsx)("table",{className:"tt-table",children:(0,i.jsxs)("tbody",{children:[(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,children:(0,i.jsxs)("div",{className:"image-container",children:[(0,i.jsx)(v,{className:"background-image",candidates:[e.SteamId?"https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/".concat(e.SteamId,"/header.jpg"):void 0,e.SteamId?"https://cdn.akamai.steamstatic.com/steam/apps/".concat(e.SteamId,"/library_hero.jpg"):void 0,e.SteamBackground&&e.SteamBackground.startsWith("https://images.igdb.com")?e.SteamBackground:void 0,"back/".concat(e.Id,".jpg")].filter(Boolean),alt:e.Name}),(0,i.jsx)("h3",{className:"tt-hero-title",children:e.Name})]})})}),(e.Playtime>0||null!=e.LastActivity)&&(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-clock",style:{marginRight:"6px",color:"#6b9bd1"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Playtime:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:N(e.Playtime)}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-history",style:{marginRight:"6px",color:"#9b6bd1"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Last:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:B(e.LastActivity)})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-users",style:{marginRight:"6px",color:"#6bd18f"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Community:"})]}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:[null!=(t=e.CommunityScore)?t:"",null!=e.Reviews?" (".concat(e.Reviews,")"):""]}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-thumbs-up",style:{marginRight:"6px",color:"#d1a86b"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Critic:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:null!=(l=e.CriticScore)?l:""})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-hourglass-half",style:{marginRight:"6px",color:"#d16b8f"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"HLTB:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:u}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-hdd",style:{marginRight:"6px",color:"#d1c86b"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Size:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:F(e.InstallSize)})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-calendar-plus",style:{marginRight:"6px",color:"#8f6bd1"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Added:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:B(e.Added)}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-calendar-alt",style:{marginRight:"6px",color:"#8f6bd1"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Released:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:B(e.ReleaseDate)})]}),p&&(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-tachometer-alt",style:{marginRight:"6px",color:"#6bc7d1"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"FPS:"})]}),(0,i.jsx)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:null!=e.AvgFPS?Math.round(e.AvgFPS):""}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",fontSize:"0.9em",color:"#aaa"},children:[(0,i.jsx)("i",{className:"fas fa-bolt",style:{marginRight:"6px",color:"#f1c40f"}}),(0,i.jsx)("strong",{style:{color:"#ccc"},children:"Power:"})]}),(0,i.jsxs)("td",{style:{whiteSpace:"nowrap",padding:"6px 8px",color:"#fff"},children:[null!=e.CpuPwrAvg&&(0,i.jsxs)(i.Fragment,{children:[Math.round(e.CpuPwrAvg),"W"]}),null!=e.GpuPwrAvg&&0!==e.GpuPwrAvg&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-laptop",style:{marginLeft:"5px",marginRight:"-5px",color:"#6bd18f"}}),Math.round(e.GpuPwrAvg),"W"]})]})]}),h&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,style:{padding:"12px 0"},children:(0,i.jsxs)("div",{className:"tt-deck-box",children:[(0,i.jsxs)("div",{className:"tt-deck-row",children:[(0,i.jsx)("i",{className:"fas fa-gamepad",style:{fontSize:"1.2em",color:"#1abc9c"}}),(0,i.jsx)("span",{style:{fontSize:"1em",fontWeight:"600",color:"#fff",letterSpacing:"0.02em"},children:"Steam Deck"}),e.SteamDeck&&(0,i.jsxs)("span",{style:{marginLeft:"auto",fontSize:"0.9em",color:"#1abc9c",fontWeight:"500"},children:[(0,i.jsx)("i",{className:"fas fa-calendar-check",style:{marginRight:"4px"}}),e.SteamDeck]})]}),(0,i.jsxs)("div",{className:"tt-deck-wrap",children:[e.DeckPerformance&&(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-tachometer-alt",style:{marginRight:"6px",color:"#3498db"}}),(0,i.jsx)("strong",{style:{color:"#aaa",marginRight:"8px"},children:"Perf:"}),(0,i.jsxs)("span",{style:{color:"#fff",display:"inline-flex",alignItems:"center"},children:[n(e.DeckPerformance),"string"==typeof e.DeckPerformance&&null==a(e.DeckPerformance)?(0,i.jsx)("span",{style:{marginLeft:"6px"},children:e.DeckPerformance}):null]})]}),e.DeckBattery&&(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-battery-three-quarters",style:{marginRight:"6px",color:"#f39c12"}}),(0,i.jsx)("strong",{style:{color:"#aaa",marginRight:"8px"},children:"Battery:"}),(0,i.jsxs)("span",{style:{color:"#fff",display:"inline-flex",alignItems:"center"},children:[n(e.DeckBattery),"string"==typeof e.DeckBattery&&null==a(e.DeckBattery)?(0,i.jsx)("span",{style:{marginLeft:"6px"},children:e.DeckBattery}):null]})]}),e.DeckFPS&&(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-video",style:{marginRight:"6px",color:"#e74c3c"}}),(0,i.jsx)("strong",{style:{color:"#aaa",marginRight:"8px"},children:"FPS:"}),(0,i.jsx)("span",{style:{color:"#fff"},children:e.DeckFPS})]}),e.DeckControls&&(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-gamepad",style:{marginRight:"6px",color:"#9b59b6"}}),(0,i.jsx)("strong",{style:{color:"#aaa",marginRight:"8px"},children:"Controls:"}),(0,i.jsxs)("span",{style:{color:"#fff",display:"inline-flex",alignItems:"center"},children:[n(e.DeckControls),"string"==typeof e.DeckControls&&null==a(e.DeckControls)?(0,i.jsx)("span",{style:{marginLeft:"6px"},children:e.DeckControls}):null]})]}),e.DeckVisuals&&(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-eye",style:{marginRight:"6px",color:"#1abc9c"}}),(0,i.jsx)("strong",{style:{color:"#aaa",marginRight:"8px"},children:"Visuals:"}),(0,i.jsxs)("span",{style:{color:"#fff",display:"inline-flex",alignItems:"center"},children:[n(e.DeckVisuals),"string"==typeof e.DeckVisuals&&null==a(e.DeckVisuals)?(0,i.jsx)("span",{style:{marginLeft:"6px"},children:e.DeckVisuals}):null]})]}),e.DeckStability&&(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-shield-alt",style:{marginRight:"6px",color:"#27ae60"}}),(0,i.jsx)("strong",{style:{color:"#aaa",marginRight:"8px"},children:"Stability:"}),(0,i.jsxs)("span",{style:{color:"#fff",display:"inline-flex",alignItems:"center"},children:[n(e.DeckStability),"string"==typeof e.DeckStability&&null==a(e.DeckStability)?(0,i.jsx)("span",{style:{marginLeft:"6px"},children:e.DeckStability}):null]})]})]}),e.DeckSummary&&(0,i.jsxs)("div",{className:"tt-deck-note",children:[(0,i.jsx)("i",{className:"fas fa-info-circle",style:{marginRight:"6px",color:"#1abc9c"}}),e.DeckSummary]})]})})}),o&&d("fas fa-theater-masks","Genres",null!=(r=e.Genres)?r:void 0,"genres"),o&&c("fas fa-puzzle-piece","Tags",[{values:e.Tags,colorScheme:"tags"},{values:e.Keywords,colorScheme:"keywords"}]),o&&c("fas fa-puzzle-piece","Features",[{values:e.Features,colorScheme:"features"},{values:e.Multi,colorScheme:"multi"},{values:e.ControllerSupport,colorScheme:"controller"}]),o&&c("fas fa-layer-group","Info",[{values:e.Categories,colorScheme:"categories"},{values:e.OtherSources,colorScheme:"sources"},{values:e.Notes,colorScheme:"library",delimiter:" "},{values:e.Bundles,colorScheme:"bundles"}])]})})}),!o&&(0,i.jsx)("div",{style:{flex:"0 0 320px",width:"320px",background:"#1a1d23",padding:"12px"},children:(0,i.jsx)("table",{style:{width:"100%",borderCollapse:"collapse"},children:(0,i.jsxs)("tbody",{children:[d("fas fa-theater-masks","Genres",null!=(s=e.Genres)?s:void 0,"genres"),c("fas fa-puzzle-piece","Tags",[{values:e.Tags,colorScheme:"tags"},{values:e.Keywords,colorScheme:"keywords"}]),c("fas fa-puzzle-piece","Features",[{values:e.Features,colorScheme:"features"},{values:e.Multi,colorScheme:"multi"},{values:e.ControllerSupport,colorScheme:"controller"}]),c("fas fa-layer-group","Info",[{values:e.Categories,colorScheme:"categories"},{values:e.OtherSources,colorScheme:"sources"},{values:e.Notes,colorScheme:"library",delimiter:" "},{values:e.Bundles,colorScheme:"bundles"}])]})})})]}),!o&&e.SteamScreenshots&&e.SteamScreenshots.length>0&&(0,i.jsx)(M,{screenshots:e.SteamScreenshots})]})}let M=o.memo(e=>{let{screenshots:t}=e,[l,r]=(0,o.useState)(0),[s,a]=(0,o.useState)(new Set([0]));return(0,o.useEffect)(()=>{let e=setInterval(()=>{r(e=>{let l=(e+1)%t.length;return a(e=>new Set(e).add(l)),l})},3e3);return()=>clearInterval(e)},[t.length]),(0,o.useEffect)(()=>{let e=(l+1)%t.length;s.has(e)||a(t=>new Set(t).add(e))},[l,t.length,s]),(0,i.jsxs)("div",{style:{width:"100%",background:"linear-gradient(135deg, #1a1d23 0%, #16181d 100%)",display:"flex",marginTop:"12px",marginBottom:"12px",justifyContent:"center",alignItems:"center",position:"relative"},children:[(0,i.jsx)("div",{style:{position:"relative",width:"600px",height:"338px"},children:t.map((e,t)=>s.has(t)?(0,i.jsx)("img",{src:e.replace("1920x1080","600x338"),style:{position:"absolute",top:0,left:0,width:"600px",height:"338px",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",opacity:+(l===t),transition:"opacity 0.5s ease-in-out",pointerEvents:l===t?"auto":"none"},loading:"lazy",decoding:"async"},t):null)}),(0,i.jsx)("div",{style:{position:"absolute",bottom:"24px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",zIndex:10},children:t.map((e,t)=>(0,i.jsx)("button",{onClick:()=>r(t),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:l===t?"#fff":"rgba(255, 255, 255, 0.4)",cursor:"pointer",transition:"all 0.3s ease",padding:0},"aria-label":"Go to screenshot ".concat(t+1)},t))})]})},(e,t)=>e.screenshots===t.screenshots);var D=l(8442);let E=(e,t,l,i,r,s,o,a,n,c,u,p)=>[{icon:d.RIx,placeholder:"State Filters",data:["Hidden:Yes","Hidden:No","Installed:Yes","Installed:No","Borrowed:Yes","Borrowed:No","Free:Yes","Free:No","Greek:Yes","Greek:No","BestOnDeck:Yes","BestOnDeck:No","Desk:Yes","Desk:No","Controller:Yes","Controller:No","Completed:Yes","Completed:No","Multiplayer:Yes","Multiplayer:No","SinglePlayer:Yes","SinglePlayer:No","Top:Yes","Top:No","NoSteam:Yes","NoSteam:No","NoIGDB:Yes","NoIGDB:No","FPS:Yes","FPS:No","Horror:Yes","Horror:No","Android:Yes","Android:No"],value:p.selectedStateFilters,fieldName:"StateFilters",setValue:p.setSelectedStateFilters},{icon:d.gt3,placeholder:"Critic",data:["null","0","1","2","3","4","5","6","7","8","9","10"].reverse(),value:p.selectedCriticScoreGroup,fieldName:"CriticScoreGroup",setValue:p.setSelectedCriticScoreGroup},{icon:d.YXz,placeholder:"Multiplayer",data:["null",...r],value:p.selectedMultiplayer,fieldName:"Multi",setValue:p.setSelectedMultiplayer},{icon:d.YXz,placeholder:"Co-op",data:["null",...n],value:p.selectedCoop,fieldName:"Coop",setValue:p.setSelectedCoop},{icon:d.YXz,placeholder:"Local Co-op",data:["null",...c],value:p.selectedLocalCoop,fieldName:"LocalCoop",setValue:p.setSelectedLocalCoop},{icon:d.YXz,placeholder:"Online Co-op",data:["null",...u],value:p.selectedOnlineCoop,fieldName:"OnlineCoop",setValue:p.setSelectedOnlineCoop},{icon:d.nBS,placeholder:"Source",data:["null",...e],value:p.selectedSources,fieldName:"Source",setValue:p.setSelectedSources},{icon:d.wJQ,placeholder:"Tag",data:["null",...t],value:p.selectedTag,fieldName:"Tags",setValue:p.setSelectedTag},{icon:d.pBr,placeholder:"Genres",data:["null",...l],value:p.selectedGenre,fieldName:"Genres",setValue:p.setSelectedGenre},{icon:d.yRn,placeholder:"Feature",data:["null",...i],value:p.selectedFeature,fieldName:"Features",setValue:p.setSelectedFeature},{icon:d.CMH,placeholder:"Completion",data:["null","Not Played","Played","Beaten","Completed","Abandoned","*","**","***","****","*****"].reverse(),value:p.selectedCompletionStatus,fieldName:"CompletionStatus",setValue:p.setSelectedCompletionStatus},{icon:d.YXz,placeholder:"Community",data:["null","0","1","2","3","4","5","6","7","8","9","10"].reverse(),value:p.selectedCommunityScoreGroup,fieldName:"CommunityScoreGroup",setValue:p.setSelectedCommunityScoreGroup},{icon:d.gt3,placeholder:"Max Score",data:["null","0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100"].reverse(),value:p.selectedMaxScore,fieldName:"MaxScore",setValue:p.setSelectedMaxScore},{icon:d.j1Q,placeholder:"Reviews",data:["null","1","10","150","500","1000","10000","50000","200000"].reverse(),value:p.selectedReviewCategory,fieldName:"ReviewCategory",setValue:p.setSelectedReviewCategory},{icon:d.itz,placeholder:"Released",data:["null",...s],value:p.selectedReleaseYear,fieldName:"ReleaseYear",setValue:p.setSelectedReleaseYear},{icon:d.OiG,placeholder:"Added",data:["null",...o],value:p.selectedAddedYear,fieldName:"AddedYear",setValue:p.setSelectedAddedYear},{icon:d.x$1,placeholder:"Age Rating",data:["null",...a],value:p.selectedAgeRating,fieldName:"AgeRating",setValue:p.setSelectedAgeRating}];function O(e){let{sources:t,tags:l,genres:r,features:s,multi:a,coop:n,localCoop:c,onlineCoop:u,releaseYears:p,addedYears:h,ageRatings:g,isFilterVisible:m,setIsFilterVisible:f,unfilteredCurrentGames:x,cGames:S,setGames:y,onFiltersChanged:v,refreshCountersSignal:b,toggleFilters:C,criticField:w}=e,j=(0,o.useRef)([]),k=(0,o.useRef)({CriticScore:{logic:"and",filters:[]},MaxScore:{logic:"and",filters:[]},Source:{logic:"and",filters:[]},ReleaseYear:{logic:"and",filters:[]},AddedYear:{logic:"and",filters:[]},AgeRating:{logic:"and",filters:[]},Hidden:{logic:"and",filters:[]},StateFilters:{logic:"and",filters:[]},Name:{logic:"and",filters:[]},CompletionStatus:{logic:"and",filters:[]},Genres:{logic:"and",filters:[]},Tags:{logic:"and",filters:[]},Features:{logic:"and",filters:[]},Categories:{logic:"and",filters:[]},CommunityScore:{logic:"and",filters:[]},CommunityScoreGroup:{logic:"and",filters:[]},CriticScoreGroup:{logic:"and",filters:[]},ReviewCategory:{logic:"and",filters:[]},PlayerCount:{logic:"and",filters:[]},ReleaseMonth:{logic:"and",filters:[]},AddedMonth:{logic:"and",filters:[]},LastActivityYear:{logic:"and",filters:[]},IsInstalled:{logic:"and",filters:[]},IsBorrowed:{logic:"and",filters:[]},IsFree:{logic:"and",filters:[]},IsGreek:{logic:"and",filters:[]},IsBestOnDeck:{logic:"and",filters:[]},IsDesk:{logic:"and",filters:[]},IsController:{logic:"and",filters:[]},IsCompleted:{logic:"and",filters:[]},IsMultiplayer:{logic:"and",filters:[]},IsSinglePlayer:{logic:"and",filters:[]},IsTop:{logic:"and",filters:[]},IGDB:{logic:"and",filters:[]},Multi:{logic:"and",filters:[]},Coop:{logic:"and",filters:[]},LocalCoop:{logic:"and",filters:[]},OnlineCoop:{logic:"and",filters:[]}}),N=k.current,F=(0,o.useRef)(null),B=(0,o.useRef)(""),A=(0,o.useRef)(null),G=(e,t)=>{if("Name"===t)k.current[t]={logic:"and",filters:[{field:"Name",operator:"contains",value:e.value}]};else if("StateFilters"===t){k.current.Hidden={logic:"and",filters:[]},k.current.IsInstalled={logic:"and",filters:[]},k.current.IsBorrowed={logic:"and",filters:[]},k.current.IsFree={logic:"and",filters:[]},k.current.IsGreek={logic:"and",filters:[]},k.current.IsBestOnDeck={logic:"and",filters:[]},k.current.IsController={logic:"and",filters:[]},k.current.IsCompleted={logic:"and",filters:[]},k.current.IsMultiplayer={logic:"and",filters:[]},k.current.IsSinglePlayer={logic:"and",filters:[]},k.current.IsTop={logic:"and",filters:[]},k.current.IsFPS={logic:"and",filters:[]},k.current.IsHorror={logic:"and",filters:[]},k.current.Android={logic:"and",filters:[]},k.current.Steam={logic:"and",filters:[]};let t={Hidden:{logic:"or",filters:[]},IsInstalled:{logic:"or",filters:[]},IsBorrowed:{logic:"or",filters:[]},IsFree:{logic:"or",filters:[]},IsGreek:{logic:"or",filters:[]},IsBestOnDeck:{logic:"or",filters:[]},IsController:{logic:"or",filters:[]},IsCompleted:{logic:"or",filters:[]},IsMultiplayer:{logic:"or",filters:[]},IsSinglePlayer:{logic:"or",filters:[]},IsTop:{logic:"or",filters:[]},IsFPS:{logic:"or",filters:[]},IsHorror:{logic:"or",filters:[]},Steam:{logic:"or",filters:[]},Android:{logic:"or",filters:[]}};e.value.forEach(e=>{let[l,i]=e.split(":");if("Any"!==i){let e="Yes"===i;"Hidden"===l?t.Hidden.filters.push({field:"Hidden",operator:"eq",value:e}):"Installed"===l?t.IsInstalled.filters.push({field:"IsInstalled",operator:"eq",value:e}):"Borrowed"===l?t.IsBorrowed.filters.push({field:"IsBorrowed",operator:"eq",value:e}):"Free"===l?t.IsFree.filters.push({field:"IsFree",operator:"eq",value:e}):"Greek"===l?t.IsGreek.filters.push({field:"IsGreek",operator:"eq",value:e}):"BestOnDeck"===l?t.IsBestOnDeck.filters.push({field:"IsBestOnDeck",operator:"eq",value:e}):"Desk"===l?t.IsDesk.filters.push({field:"Desk",operator:"eq",value:e}):"Controller"===l?t.IsController.filters.push({field:"IsController",operator:"eq",value:e}):"Completed"===l?t.IsCompleted.filters.push({field:"IsCompleted",operator:"eq",value:e}):"Multiplayer"===l?t.IsMultiplayer.filters.push({field:"IsMultiplayer",operator:"eq",value:e}):"SinglePlayer"===l?t.IsSinglePlayer.filters.push({field:"IsSinglePlayer",operator:"eq",value:e}):"Top"===l?t.IsTop.filters.push({field:"IsTop",operator:"eq",value:e}):"NoSteam"===l?e?(t.Steam.filters.push({field:"Steam",operator:"isnull",value:!0}),t.Steam.filters.push({field:"Steam",operator:"eq",value:""})):(t.Steam.filters.push({field:"Steam",operator:"isnotnull",value:!0}),t.Steam.filters.push({field:"Steam",operator:"neq",value:""})):"FPS"===l?t.IsFPS.filters.push({field:"IsFPS",operator:"eq",value:e}):"Horror"===l?t.IsHorror.filters.push({field:"IsHorror",operator:"eq",value:e}):"NoIGDB"===l?e?(t.IGDB=t.IGDB||{logic:"or",filters:[]},t.IGDB.filters.push({field:"IGDBId",operator:"isnull",value:!0}),t.IGDB.filters.push({field:"IGDBId",operator:"eq",value:""})):(t.IGDB=t.IGDB||{logic:"or",filters:[]},t.IGDB.filters.push({field:"IGDBId",operator:"isnotnull",value:!0}),t.IGDB.filters.push({field:"IGDBId",operator:"neq",value:""})):"Android"===l&&t.Android.filters.push({field:"Android",operator:"eq",value:e})}}),Object.keys(t).forEach(e=>{t[e].filters.length>0&&(k.current[e]=t[e])})}else if("TagsNot"===t){let t=e.value.map(e=>({field:"Tags",operator:"doesnotcontain",value:e}));k.current.TagsNot={logic:"and",filters:t}}else if("FeaturesNot"===t){let t=e.value.map(e=>({field:"Features",operator:"doesnotcontain",value:e}));k.current.FeaturesNot={logic:"and",filters:t}}else if("GenresNot"===t){let t=e.value.map(e=>({field:"Genres",operator:"doesnotcontain",value:e}));k.current.GenresNot={logic:"and",filters:t}}else if("MaxScore"===t){let t=[];(e.value||[]).forEach(e=>{if("null"===e)t.push({field:"MaxScore",operator:"isnull",value:!0});else if(e.indexOf("-")>-1){let l=e.split("-").map(e=>parseFloat(e)),i=l[0],r=l.length>1?l[1]:l[0];t.push({field:"MaxScore",operator:"range",value:[i,r]})}else{let l=parseFloat(e);t.push({field:"MaxScore",operator:"eq",value:l})}}),k.current.MaxScore={logic:"or",filters:t}}else for(let l of Object.keys(N))if(t===l){let t="eq";["Genres","Features","Categories","Tags","Multi"].includes(l)&&(t="contains");let i=(e.value||[]).map(e=>"null"===e?["Genres","Features","Categories","Tags","Multi"].includes(l)?{field:l,operator:"eq",value:""}:{field:l,operator:"isnull",value:!0}:{field:l,operator:t,value:"true"===e||"false"!==e&&e}).flat();k.current[l]={logic:"or",filters:i}}if(C&&void 0!==C.Installed)if("all"===C.Installed)k.current.IsInstalled={logic:"and",filters:[]};else{let e="yes"===C.Installed;k.current.IsInstalled={logic:"or",filters:[{field:"IsInstalled",operator:"eq",value:e}]}}if(C&&void 0!==C.Android)if("all"===C.Android)k.current.Android={logic:"and",filters:[]};else{let e="yes"===C.Android;k.current.Android={logic:"or",filters:[{field:"Android",operator:"eq",value:e}]}}if(C&&void 0!==C.BestOnDeck)if("all"===C.BestOnDeck)k.current.IsBestOnDeck={logic:"and",filters:[]};else{let e="yes"===C.BestOnDeck;k.current.IsBestOnDeck={logic:"or",filters:[{field:"BestOnDeck",operator:"eq",value:e}]}}if(C&&void 0!==C.Desk)if("all"===C.Desk)k.current.IsDesk={logic:"and",filters:[]};else{let e="yes"===C.Desk;k.current.IsDesk={logic:"or",filters:[{field:"Desk",operator:"eq",value:e}]}}if(C&&void 0!==C.TV)if("all"===C.TV)k.current.TV={logic:"and",filters:[]};else{let e="yes"===C.TV;k.current.TV={logic:"or",filters:[{field:"TV",operator:"eq",value:e}]}}B.current=JSON.stringify({logic:"and",filters:Object.values(N).flatMap(e=>e.filters.length>0?[e]:[])}),F.current=null,T(),v&&v()},[I,P]=(0,o.useState)({selectedCriticScoreGroup:[],selectedSources:[],selectedCompletionStatus:[],selectedCommunityScoreGroup:[],selectedReviewCategory:[],selectedReleaseYear:[],selectedAddedYear:[],selectedTag:[],selectedFeature:[],selectedGenre:[],selectedName:[],selectedStateFilters:[],selectedMultiplayer:[],selectedCoop:[],selectedLocalCoop:[],selectedOnlineCoop:[],selectedAgeRating:[],selectedMaxScore:[]}),[M,O]=(0,o.useState)([]),[R,L]=(0,o.useState)([]),[z,_]=(0,o.useState)([]);function T(){F.current||(F.current=function(){let e={logic:"and",filters:Object.values(k.current).flatMap(e=>e.filters.length>0?[e]:[])}.filters;return t=>e.every(e=>"and"===e.logic&&e.filters.length>0&&"doesnotcontain"===e.filters[0].operator?e.filters.every(e=>{let l=t[e.field];return!(l&&l.toString().toLowerCase().includes(e.value.toString().toLowerCase()))}):e.filters.some(e=>{var l,i,r,s,o;let a=t[e.field];if("IsTop"===e.field)return!!t.Top===e.value;if("IsBorrowed"===e.field)return((null==(l=t.Features)?void 0:l.toLowerCase().includes("borrowed"))||!1)===e.value;if("IsFree"===e.field){let l=parseFloat((null==(i=t.Price)?void 0:i.toString())||"0"),s=parseFloat((null==(r=t.BundlePrice)?void 0:r.toString())||"0");return(0===l&&0===s)===e.value}if("IsGreek"===e.field)return(t.Greek||!1)===e.value;if("IsBestOnDeck"===e.field)return(t.BestOnDeck||0)>0===e.value;if("IsDesk"===e.field||"Desk"===e.field)return!!t.Desk===e.value;if("IsController"===e.field)return null!=t.ControllerSupport===e.value;if("IsCompleted"===e.field)return(null!=(o=["⭐","⭐⭐","⭐⭐⭐","⭐⭐⭐⭐","⭐⭐⭐⭐⭐","Abandoned","Beaten","Completed"].indexOf(null!=(s=t.CompletionStatus)?s:"-1"))?o:-1)>-1===e.value;if("IsMultiplayer"===e.field)return(null!=t.Multi&&""!==t.Multi&&"Single Player"!==t.Multi)===e.value;if("IsSinglePlayer"===e.field)return(null==t.Multi||""===t.Multi||(t.Multi||"").toString().toLowerCase().includes("single player"))===e.value;if("IsFPS"===e.field)return(t.Tags||"").toString().toLowerCase(),(t.Genres||"").toString().toLowerCase(),t.FPS===e.value;if("IsHorror"===e.field){let l=(t.Tags||"").toString().toLowerCase();return((l.split("|")[0]||"").includes("horror")&&!l.includes("2d")&&!l.includes("2.5d"))===e.value}if("Android"===e.field)return!!t.Android===e.value;if("contains"===e.operator)return a&&a.toString().toLowerCase().includes(e.value.toString().toLowerCase());if("eq"===e.operator)return"boolean"==typeof e.value?!!a===e.value:a==e.value;if("range"===e.operator){let t=e.value,l=t[0],i=t.length>1?t[1]:t[0],r="number"==typeof a?a:parseFloat(a||"0");return null!=r&&r>=l&&r<=i}return"gte"===e.operator?("number"==typeof a?a:parseFloat(a||"0"))>=e.value:"lte"===e.operator?("number"==typeof a?a:parseFloat(a||"0"))<=e.value:"isnull"===e.operator?null==a||""===a:"doesnotcontain"===e.operator&&!(a&&a.toString().toLowerCase().includes(e.value.toString().toLowerCase()))}))}());let e=F.current,t=x.filter(e),l=(null==S?void 0:S.games)||[],i=!1;if(l.length===t.length){i=!0;for(let e=0;e<l.length;e++){let r=l[e],s=t[e];if(!r||!s||r.Id!==s.Id){i=!1;break}}}i||y({...S,games:t}),v&&v()}(0,o.useEffect)(()=>{if(j.current===x||(j.current=x,!Object.values(k.current).some(e=>e.filters.length>0)||0===x.length))return;let e=JSON.stringify({logic:"and",filters:Object.values(k.current).flatMap(e=>e.filters.length>0?[e]:[])});B.current!==e&&(B.current=e,F.current=null),T()},[x]),(0,o.useEffect)(()=>{if(C)try{G({value:I.selectedName},"Name")}catch(e){console.warn("Failed to reapply filters on toggle change",e)}},[C]);let Y={container:e=>({...e,width:"100%"}),control:e=>({...e,backgroundColor:"#333",color:"#fff",borderColor:"#555",width:"100%"}),menu:e=>({...e,backgroundColor:"#333",color:"#fff",maxHeight:"300px",overflowY:"auto",zIndex:10001}),menuPortal:e=>({...e,zIndex:10001}),option:(e,t)=>{let{isFocused:l,isSelected:i}=t;return{...e,backgroundColor:i?"#555":l?"#444":"#333",color:"#fff"}},singleValue:e=>({...e,color:"#fff"}),multiValue:e=>({...e,backgroundColor:"#555",color:"#fff"}),multiValueLabel:e=>({...e,color:"#fff"}),multiValueRemove:e=>({...e,color:"#fff",":hover":{backgroundColor:"#444",color:"#fff"}})},H=(0,o.useRef)(new Map);(0,o.useEffect)(()=>{H.current=new Map},[x,b]);let V=(e,t,l,r,s)=>{let o=H.current,a=e=>{if(o.has(s+"||"+e))return o.get(s+"||"+e);let t=0;if("StateFilters"===s){let l=e.split(":"),i=l[0],r="Yes"===l[1];return t=x.filter(e=>{var t,l,s,o,a,n,d,c,u,p;if("Hidden"===i)return(e.Hidden||!1)===r;if("Installed"===i)return(e.IsInstalled||!1)===r;if("Borrowed"===i)return((null==(t=e.Features)?void 0:t.toLowerCase().includes("borrowed"))||!1)===r;if("Free"===i){let t=parseFloat((null==(l=e.Price)?void 0:l.toString())||"0"),i=parseFloat((null==(s=e.BundlePrice)?void 0:s.toString())||"0");return(0===t&&0===i)===r}if("Greek"===i)return(e.Greek||!1)===r;if("BestOnDeck"===i)return(e.BestOnDeck||0)>0===r;if("Desk"===i)return!!e.Desk===r;if("Controller"===i)return null!=e.ControllerSupport===r;if("Completed"===i)return(null!=(a=["⭐","⭐⭐","⭐⭐⭐","⭐⭐⭐⭐","⭐⭐⭐⭐⭐","Abandoned","Beaten","Completed"].indexOf(null!=(o=e.CompletionStatus)?o:"-1"))?a:-1)>-1===r;if("Multiplayer"===i)return(null!=e.Multi&&""!==e.Multi&&"Single Player"!==e.Multi)===r;if("SinglePlayer"===i)return(null==e.Multi||""===e.Multi||(null==(n=e.Multi)?void 0:n.toLowerCase().includes("single player")))===r;if("Top"===i)return(e.Top||!1)===r;if("NoSteam"===i)return r?null==e.Steam||""===e.Steam:null!=e.Steam&&""!==e.Steam;if("NoIGDB"===i)return r?null==e.IGDBId||""===e.IGDBId:null!=e.IGDBId&&""!==e.IGDBId;if("FPS"===i){let t=(null==(d=e.Tags)?void 0:d.toLowerCase())||"",l=(null==(c=e.Genres)?void 0:c.toLowerCase())||"";return((t.includes("fps")||t.includes("first-person"))&&l.includes("shooter")&&!t.includes("third person")&&!t.includes("rpg")&&!t.includes("role-playing (rpg)")&&!t.includes("third-person shooter")&&!t.includes("puzzle platformer"))===r}if("Horror"===i){let t=(null==(u=e.Tags)?void 0:u.toLowerCase())||"";return((null==(p=t.split("|")[0])?void 0:p.includes("horror"))&&!t.includes("2d")&&!t.includes("2.5d"))===r}return"Android"===i&&!!e.Android===r}).length,o.set(s+"||"+e,t),t}if("Source"===s){let l=(e||"").toString().toLowerCase();t=x.filter(e=>(e.Source||"").toString().toLowerCase()===l).length}else if("Tags"===s||"TagsNot"===s){let l=(e||"").toString().toLowerCase();t=x.filter(e=>(e.Tags||"").toString().toLowerCase().includes(l)).length}else if("Features"===s||"FeaturesNot"===s){let l=(e||"").toString().toLowerCase();t=x.filter(e=>(e.Features||"").toString().toLowerCase().includes(l)).length}else if("Genres"===s||"GenresNot"===s){let l=(e||"").toString().toLowerCase();t=x.filter(e=>(e.Genres||"").toString().toLowerCase().includes(l)).length}else if("Features"===s){let l=(e||"").toString().toLowerCase();t=x.filter(e=>(e.Features||"").toString().toLowerCase().includes(l)).length}else if("ReleaseYear"===s)t=x.filter(t=>{var l;return(null==(l=t.ReleaseYear)?void 0:l.toString())===e}).length;else if("AddedYear"===s)t=x.filter(t=>(t.Added?new Date(t.Added).getFullYear().toString():null)===e).length;else if("AgeRating"===s)t=x.filter(t=>t.AgeRating===e).length;else if("MaxScore"===s)if("null"===e)t=x.filter(e=>null==e.MaxScore).length;else if(e.indexOf("-")>-1){let l=e.split("-").map(e=>parseFloat(e)),i=l[0],r=l.length>1?l[1]:l[0];t=x.filter(e=>{let t=e.MaxScore;return null!=t&&t>=i&&t<=r}).length}else{let l=parseFloat(e);t=x.filter(e=>{var t;return(null!=(t=e.MaxScore)?t:0)===l}).length}else if("CompletionStatus"===s)t=x.filter(t=>t.CompletionStatus===e).length;else if("CriticScoreGroup"===s){let l="null"===e?null:e;t=x.filter(e=>{let t=e.CriticScore;return null===l?null==t:Math.min(10,Math.floor((t||0)/10)+1).toString()===l}).length}else if("CommunityScoreGroup"===s){let l="null"===e?null:e;t=x.filter(e=>{let t=e.CommunityScore;return null===l?null==t:Math.min(10,Math.floor((t||0)/10)+1).toString()===l}).length}else"ReviewCategory"===s?t=x.filter(t=>{let l=t.Reviews||0;return"null"===e?null==l||0===l:l>=parseInt(e)}).length:"Multi"===s&&(t=x.filter(t=>{var l;return"null"===e?null==t.Multi||""===t.Multi:null==(l=t.Multi)?void 0:l.includes(e)}).length);return o.set(s+"||"+e,t),t},n=new Map;for(let e of t){if(null==e)continue;if("null"===e){n.has("null")||n.set("null","null");continue}let t=e.toString().toLowerCase();n.has(t)||n.set(t,e)}let d=Array.from(n.values());("Tags"===s||"TagsNot"===s)&&(d=d.sort((e,t)=>{let l=a(e),i=a(t);return"null"===e?-1:"null"===t?1:i-l}));let c=d.filter(e=>"StateFilters"===s||a(e)>0).map(e=>{let t=a(e);return{value:e,label:"null"===e?"None [".concat(t,"]"):"".concat(e," [").concat(t,"]")}}),u=l.map(e=>({value:e,label:e}));return(0,i.jsx)(D.Ay,{isMulti:!0,options:c,value:u,onChange:e=>{r(e?e.map(e=>e.value):[])},placeholder:e,styles:Y,closeMenuOnSelect:!1,menuPortalTarget:document.body,menuPosition:"fixed"})};return(0,i.jsxs)(i.Fragment,{children:[(Object.keys(I).some(e=>{let t=I[e];return Array.isArray(t)&&t.length>0&&""!==t[0]})||M.length>0||R.length>0||z.length>0)&&(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",padding:"8px 12px",background:"rgba(34, 34, 34, 0.85)",backdropFilter:"blur(10px)",borderRadius:"8px",marginBottom:"10px",fontSize:"13px",color:"#d0d0d0",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:"bold",color:"#90caf9"},children:"Active Filters:"}),I.selectedName[0]&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Name: ",I.selectedName[0]]}),I.selectedStateFilters.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["State: ",I.selectedStateFilters.join(", ")]}),I.selectedCriticScoreGroup.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Critic: ",I.selectedCriticScoreGroup.join(", ")]}),I.selectedSources.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Source: ",I.selectedSources.join(", ")]}),I.selectedTag.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Tag: ",I.selectedTag.join(", ")]}),M.length>0&&(0,i.jsxs)("span",{style:{background:"#8e4242",padding:"4px 8px",borderRadius:"4px"},children:["Tag (Not): ",M.join(", ")]}),I.selectedGenre.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Genre: ",I.selectedGenre.join(", ")]}),R.length>0&&(0,i.jsxs)("span",{style:{background:"#8e4242",padding:"4px 8px",borderRadius:"4px"},children:["Genre (Not): ",R.join(", ")]}),I.selectedFeature.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Feature: ",I.selectedFeature.join(", ")]}),z.length>0&&(0,i.jsxs)("span",{style:{background:"#8e4242",padding:"4px 8px",borderRadius:"4px"},children:["Feature (Not): ",z.join(", ")]}),I.selectedCompletionStatus.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Completion: ",I.selectedCompletionStatus.join(", ")]}),I.selectedCommunityScoreGroup.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Community: ",I.selectedCommunityScoreGroup.join(", ")]}),I.selectedReviewCategory.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Reviews: ",I.selectedReviewCategory.join(", ")]}),I.selectedReleaseYear.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Released: ",I.selectedReleaseYear.join(", ")]}),I.selectedAddedYear.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Added: ",I.selectedAddedYear.join(", ")]}),I.selectedAgeRating.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Age Rating: ",I.selectedAgeRating.join(", ")]}),I.selectedMaxScore.length>0&&(0,i.jsxs)("span",{style:{background:"#555",padding:"4px 8px",borderRadius:"4px"},children:["Max Score: ",I.selectedMaxScore.join(", ")]}),(0,i.jsx)("button",{onClick:()=>{P({selectedName:[""],selectedStateFilters:[],selectedCriticScoreGroup:[],selectedSources:[],selectedTag:[],selectedGenre:[],selectedFeature:[],selectedCompletionStatus:[],selectedCommunityScoreGroup:[],selectedReviewCategory:[],selectedReleaseYear:[],selectedAddedYear:[],selectedMultiplayer:[],selectedCoop:[],selectedLocalCoop:[],selectedOnlineCoop:[],selectedAgeRating:[],selectedMaxScore:[]}),Object.keys(k.current).forEach(e=>{k.current[e]={logic:"and",filters:[]}}),y({...S,games:x}),O([]),L([]),_([])},style:{background:"#d32f2f",color:"white",border:"none",padding:"4px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold",marginLeft:"auto"},children:"Clear All"})]}),m&&(0,i.jsxs)("div",{style:{position:"fixed",top:"10%",left:"50%",transform:"translateX(-50%)",background:"rgba(34, 34, 34, 0.98)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.6)",border:"1px solid rgba(160, 160, 160, 0.3)",zIndex:1e4,width:"90vw",maxWidth:"1400px",maxHeight:"90vh",overflow:"visible"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid rgba(160, 160, 160, 0.3)",paddingBottom:"12px"},children:[(0,i.jsx)("h3",{style:{margin:0,color:"#d0d0d0",fontSize:"24px"},children:"Filters"}),(0,i.jsx)("button",{onClick:()=>f(!1),style:{background:"transparent",border:"none",color:"#d0d0d0",fontSize:"28px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",width:"100%"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#333",padding:"8px",borderRadius:"6px"},children:[(0,i.jsx)(d.x$1,{color:"#fff"}),(0,i.jsx)("input",{type:"text",placeholder:"Name",onChange:e=>{let t=e.target.value;P(e=>({...e,selectedName:[t]})),A.current&&window.clearTimeout(A.current),A.current=window.setTimeout(()=>{G({value:[t]},"Name")},250)},value:I.selectedName[0]||"",style:{background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",paddingLeft:"8px",height:"32px",outline:"none",width:"100%",flex:1}})]}),E(t,l,r,s,a,p,h,g,n,c,u,{...I,setSelectedStateFilters:e=>P(t=>({...t,selectedStateFilters:e})),setSelectedCriticScoreGroup:e=>P(t=>({...t,selectedCriticScoreGroup:e})),setSelectedSources:e=>P(t=>({...t,selectedSources:e})),setSelectedTag:e=>P(t=>({...t,selectedTag:e})),setSelectedGenre:e=>P(t=>({...t,selectedGenre:e})),setSelectedFeature:e=>P(t=>({...t,selectedFeature:e})),setSelectedCompletionStatus:e=>P(t=>({...t,selectedCompletionStatus:e})),setSelectedCommunityScoreGroup:e=>P(t=>({...t,selectedCommunityScoreGroup:e})),setSelectedReviewCategory:e=>P(t=>({...t,selectedReviewCategory:e})),setSelectedReleaseYear:e=>P(t=>({...t,selectedReleaseYear:e})),setSelectedAddedYear:e=>P(t=>({...t,selectedAddedYear:e})),setSelectedMultiplayer:e=>P(t=>({...t,selectedMultiplayer:e})),setSelectedCoop:e=>P(t=>({...t,selectedCoop:e})),setSelectedLocalCoop:e=>P(t=>({...t,selectedLocalCoop:e})),setSelectedOnlineCoop:e=>P(t=>({...t,selectedOnlineCoop:e})),setSelectedAgeRating:e=>P(t=>({...t,selectedAgeRating:e})),setSelectedMaxScore:e=>P(t=>({...t,selectedMaxScore:e}))}).map(e=>{let{icon:t,placeholder:l,data:r,value:s,fieldName:o,setValue:a}=e;return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",borderRadius:"6px",background:"#2e2e2e"},children:[t({color:"#fff"}),V(l,r,s,e=>{a(e),G({value:e},o)},o)]},o)}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#3e2b2b",padding:"8px",borderRadius:"6px"},children:[(0,i.jsx)(d.wJQ,{color:"#ffd1d1"}),V("Tags (Not)",l,M,e=>{O(e),G({value:e},"TagsNot")},"TagsNot")]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#3e2b2b",padding:"8px",borderRadius:"6px"},children:[(0,i.jsx)(d.pBr,{color:"#ffd1d1"}),V("Genres (Not)",r,R,e=>{L(e),G({value:e},"GenresNot")},"GenresNot")]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#3e2b2b",padding:"8px",borderRadius:"6px"},children:[(0,i.jsx)(d.pBr,{color:"#ffd1d1"}),V("Features (Not)",s,z,e=>{_(e),G({value:e},"FeaturesNot")},"FeaturesNot")]})]})]}),m&&(0,i.jsx)("div",{onClick:()=>f(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:9999}})]})}function R(e){let{allGames:t,onClose:l}=e,[r,s]=(0,o.useState)([]);(0,o.useEffect)(()=>{let{yearlyStats:e,oldYearStats:l,yearGameLists:i}=function(e){let t={},l=new Set,i={},r={},s={},o={},a=new Map,n=new Set;e.filter(e=>!e.Hidden).forEach(e=>{if(e.BoughtMonth){var t,l;let i=e.BoughtMonth.split("-")[0],r=parseFloat((null==(t=e.Price)?void 0:t.toString())||"0"),s=parseFloat((null==(l=e.BundlePrice)?void 0:l.toString())||"0");if(r>0&&a.set(i,(a.get(i)||0)+r),s>0&&e.Bundles&&e.Bundles.length>0){let t="".concat(i,"-").concat(e.Bundles[0]);n.has(t)||(a.set(i,(a.get(i)||0)+s),n.add(t))}}}),e.filter(e=>!e.Hidden).forEach(e=>{var n,d,c,u,p,h,g,m;if(e.Added){let l=new Date(e.Added).getFullYear();if(t[l]||(t[l]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"}),o[l]||(o[l]={bought:[],directBought:[],bundleGames:[],completed:[],added:[],addedEpic:[],addedAmazon:[],addedOther:[],addedBorrowed:[],addedGamePass:[],addedGift:[]}),t[l].added++,o[l].added.push({name:e.Name,source:e.Source||"Unknown"}),null==(n=e.Features)?void 0:n.includes("Borrowed"))t[l].addedBorrowed++,o[l].addedBorrowed.push({name:e.Name,source:e.Source||"Unknown"});else if(["Xbox Game Pass","Xbox","EA Pass","Ubisoft Connect","EA app","Battle.net"].includes(e.Source||"")&&(null!=(d=e.AddedYear)?d:0)>=2017)t[l].addedGamePass++,o[l].addedGamePass.push({name:e.Name,source:e.Source||"Unknown"});else if("Epic"===e.Source&&(null!=(c=e.AddedYear)?c:0)>=2019)t[l].addedEpic++,o[l].addedEpic.push({name:e.Name,source:e.Source||"Unknown"});else if(("Amazon"===e.Source||"Legacy Games"===e.Source||"GOG"===e.Source)&&(null!=(u=e.AddedYear)?u:0)>=2018)t[l].addedAmazon++,o[l].addedAmazon.push({name:e.Name,source:e.Source||"Unknown"});else if("Gift"===e.Price)t[l].addedGift++,o[l].addedGift.push({name:e.Name,source:e.Source||"Unknown"});else{let i=!1;if(e.BoughtMonth){let t=e.BoughtMonth.split("-")[0];if(/^\d{4}$/.test(t)){let t=(null==(p=e.Price)?void 0:p.toString())||"0",l=parseFloat(t),r=parseFloat((null==(h=e.BundlePrice)?void 0:h.toString())||"0");i=l>0||r>0||"T"===t}}i||(t[l].addedOther++,o[l].addedOther.push({name:e.Name,source:e.Source||"Unknown"}))}}if(e.BoughtMonth){let r=e.BoughtMonth.split("-")[0];if(/^\d{4}$/.test(r)){let s=parseInt(r),n=(null==(g=e.Price)?void 0:g.toString())||"0",d=parseFloat(n),c=parseFloat((null==(m=e.BundlePrice)?void 0:m.toString())||"0");if((d>0||c>0||"T"===n)&&(t[s]||(t[s]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"}),o[s]||(o[s]={bought:[],directBought:[],bundleGames:[],completed:[],added:[],addedEpic:[],addedAmazon:[],addedOther:[],addedBorrowed:[],addedGamePass:[],addedGift:[]}),t[s].bought++,o[s].bought.push({name:e.Name,source:e.Source||"Unknown"}),e.Bundles&&e.Bundles.length>0?(t[s].bundleGames++,o[s].bundleGames.push({name:e.Name,source:e.Source||"Unknown"})):(t[s].directBought++,o[s].directBought.push({name:e.Name,source:e.Source||"Unknown"})),!l.has(s))){let e=a.get(r)||0;t[s].cost=Math.round(e),l.add(s)}e.Bundles&&e.Bundles.length>0&&(t[s]||(t[s]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"}),i[s]||(i[s]=new Set),i[s].add(e.Bundles[0]))}}e.Categories&&e.Categories.split("|").filter(e=>/^\d{4}$/.test(e)).forEach(l=>{let i=parseInt(l);if(t[i]||(t[i]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"}),o[i]||(o[i]={bought:[],directBought:[],bundleGames:[],completed:[],added:[],addedEpic:[],addedAmazon:[],addedOther:[],addedBorrowed:[],addedGamePass:[],addedGift:[]}),t[i].completed++,o[i].completed.push({name:e.Name,source:e.Source||"Unknown"}),e.Playtime){let l=e.Playtime/3600;t[i].hours+=l,(!r[i]||l>r[i].hours)&&(r[i]={name:e.Name,hours:l})}if("⭐⭐⭐⭐⭐"===e.CompletionStatus){let l=i,r=e.Name,o=!1;"Subnautica"===e.Name&&2019===i&&(t[l=2018]||(t[l]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"})),("Ori and the Will of the Wisps"===e.Name||"Ori and the Blind Forest"===e.Name)&&2020===i&&(r="Ori",t[l=2022]||(t[l]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"})),"The Walking Dead"===e.Name&&(t[l=2015]||(t[l]={hours:0,bought:0,directBought:0,bundleGames:0,completed:0,added:0,addedEpic:0,addedAmazon:0,addedOther:0,addedBorrowed:0,addedGamePass:0,addedGift:0,cost:0,bundles:0,mostPlayed:"-",favorite:"-"})),"Finding Paradise"===e.Name&&(o=!0),"Sid Meier's Civilization VI"===e.Name&&(r="Civilization VI"),!o&&(s[l]||(s[l]=[]),"Ori"===r&&s[l].includes("Ori")||s[l].push(r))}})}),Object.keys(i).forEach(e=>{let l=parseInt(e);t[l]&&(t[l].bundles=i[l].size)}),Object.keys(r).forEach(e=>{let l=parseInt(e);if(t[l]){let e=r[l];t[l].mostPlayed="".concat(e.name," [").concat(Math.round(e.hours),"h]")}}),Object.keys(s).forEach(e=>{let l=parseInt(e);t[l]&&(t[l].favorite=s[l].join(", "))});let d=Object.entries(t).map(e=>{let[t,l]=e;return{year:parseInt(t),...l}}).sort((e,t)=>t.year-e.year),c=d.filter(e=>e.year>=2015),u=d.filter(e=>e.year<2015);return{yearlyStats:c,oldYearStats:u.length>0?{year:"≤2014",hours:u.reduce((e,t)=>e+t.hours,0),bought:u.reduce((e,t)=>e+t.bought,0),directBought:u.reduce((e,t)=>e+t.directBought,0),bundleGames:u.reduce((e,t)=>e+t.bundleGames,0),completed:u.reduce((e,t)=>e+t.completed,0),added:u.reduce((e,t)=>e+t.added,0),addedEpic:u.reduce((e,t)=>e+t.addedEpic,0),addedAmazon:u.reduce((e,t)=>e+t.addedAmazon,0),addedOther:u.reduce((e,t)=>e+t.addedOther,0),addedBorrowed:u.reduce((e,t)=>e+t.addedBorrowed,0),addedGamePass:u.reduce((e,t)=>e+t.addedGamePass,0),addedGift:u.reduce((e,t)=>e+t.addedGift,0),cost:u.reduce((e,t)=>e+t.cost,0),bundles:u.reduce((e,t)=>e+t.bundles,0),mostPlayed:u.filter(e=>"-"!==e.mostPlayed).map(e=>e.mostPlayed).join(", "),favorite:(()=>{let e=u.filter(e=>"-"!==e.favorite).map(e=>e.favorite).join(", ");return e?"".concat(e,", Planescape Torment"):"Planescape Torment"})()}:null,yearGameLists:o}}(t);s(e),window.oldYearStats=l,window.yearGameLists=i},[t]);let[a,n]=(0,o.useState)(null),d=e=>{switch(e){case"Steam":case"Xbox Game Pass":case"Xbox":return"\uD83C\uDFAE";case"Epic":return"\uD83C\uDFAF";case"GOG":return"\uD83D\uDFE3";case"EA Pass":case"EA App":return"\uD83C\uDFB2";case"Ubisoft Connect":return"\uD83C\uDFAA";case"Amazon":return"\uD83D\uDCE6";case"Legacy Games":return"\uD83C\uDF81";default:return"\uD83D\uDCC1"}},c=(e,t,l)=>{let r=window.yearGameLists;if(!r||!r[t]||!r[t][l])return;let s=r[t][l];if(0===s.length)return;let o=s.filter(e=>"Steam"===e.source).slice(0,50),a=s.filter(e=>"Steam"!==e.source).slice(0,50),c=(0,i.jsxs)("div",{children:[o.length>0&&(0,i.jsxs)("div",{style:{marginBottom:a.length>0?"12px":"0"},children:[(0,i.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#87CEEB"},children:["\uD83C\uDFAE Steam (",o.length,")"]}),(0,i.jsx)("div",{children:o.map((e,t)=>(0,i.jsx)("div",{style:{paddingLeft:"12px"},children:e.name},t))})]}),a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#90EE90"},children:["Other Sources (",a.length,")"]}),(0,i.jsx)("div",{children:a.map((e,t)=>(0,i.jsxs)("div",{style:{paddingLeft:"12px"},children:[d(e.source)," ",e.name]},t))})]})]});n({x:e.clientX,y:e.clientY,content:c})},u=()=>{n(null)};return(0,i.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:[(0,i.jsxs)("div",{style:{backgroundColor:"#2a2a2a",padding:"20px",borderRadius:"8px",maxWidth:"1400px",width:"95vw",maxHeight:"85vh",overflow:"auto"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,i.jsx)("h2",{style:{margin:0},children:"Yearly Statistics"}),(0,i.jsx)("button",{onClick:l,style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer"},children:"\xd7"})]}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsxs)("thead",{children:[(0,i.jsxs)("tr",{style:{backgroundColor:"#1a1a1a",borderBottom:"1px solid #666"},children:[(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"left",color:"#90caf9",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Year"}),(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"right",color:"#FFA500",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Time"}),(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"right",color:"#FFD700",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Completed"}),(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"right",color:"#FF69B4",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Cost"}),(0,i.jsx)("th",{colSpan:3,style:{padding:"8px",textAlign:"center",color:"#90EE90",fontWeight:"bold",fontSize:"13px",borderBottom:"1px solid #666"},children:"Purchases"}),(0,i.jsx)("th",{colSpan:6,style:{padding:"8px",textAlign:"center",color:"#87CEEB",fontWeight:"bold",fontSize:"13px",borderBottom:"1px solid #666"},children:"Free / Subscriptions"}),(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Total"}),(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"left",color:"#FFB6C1",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Most Played"}),(0,i.jsx)("th",{rowSpan:2,style:{padding:"8px",textAlign:"left",color:"#98FB98",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #444"},children:"Favorite"})]}),(0,i.jsxs)("tr",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #444"},children:[(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontWeight:"bold",fontSize:"11px"},children:"Unbundled"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontWeight:"bold",fontSize:"11px"},children:"Bundled"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontWeight:"bold",fontSize:"11px"},children:"Total"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"11px"},children:"Epic"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"11px"},children:"Amazon"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"11px"},children:"Other"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"11px"},children:"FamShare"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"11px"},children:"GamePass"}),(0,i.jsx)("th",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontWeight:"bold",fontSize:"11px"},children:"Gift"})]})]}),(0,i.jsxs)("tbody",{children:[r.map((e,t)=>(0,i.jsxs)("tr",{style:{backgroundColor:t%2==0?"#2a2a2a":"#333",borderBottom:"1px solid #444"},children:[(0,i.jsx)("td",{style:{padding:"8px",fontWeight:"bold",color:"#90caf9",fontSize:"13px"},children:e.year}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FFA500",fontSize:"13px"},children:[Math.round(e.hours),"h"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#FFD700",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"completed"),onMouseLeave:u,children:e.completed}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FF69B4",fontSize:"13px"},children:[e.cost,"€"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"directBought"),onMouseLeave:u,children:e.directBought}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"11px",whiteSpace:"nowrap",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"bundleGames"),onMouseLeave:u,children:e.bundles>0?"".concat(e.bundleGames," / ").concat(e.bundles):e.bundleGames}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px",fontWeight:"bold",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"bought"),onMouseLeave:u,children:e.bought}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"addedEpic"),onMouseLeave:u,children:e.addedEpic}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"addedAmazon"),onMouseLeave:u,children:e.addedAmazon}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"addedOther"),onMouseLeave:u,children:e.addedOther}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"addedBorrowed"),onMouseLeave:u,children:e.addedBorrowed}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"addedGamePass"),onMouseLeave:u,children:e.addedGamePass}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"addedGift"),onMouseLeave:u,children:e.addedGift}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",fontWeight:"bold",cursor:"pointer"},onMouseEnter:t=>c(t,e.year,"added"),onMouseLeave:u,children:e.added}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"left",color:"#FFB6C1",fontSize:"11px"},children:e.mostPlayed}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"left",color:"#98FB98",fontSize:"11px"},children:e.favorite})]},e.year)),(0,i.jsxs)("tr",{style:{backgroundColor:"#1a1a1a",borderTop:"2px solid #666",fontWeight:"bold"},children:[(0,i.jsx)("td",{style:{padding:"8px",color:"#90caf9",fontSize:"13px"},children:"Total"}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FFA500",fontSize:"13px"},children:[Math.round(r.reduce((e,t)=>e+t.hours,0)),"h"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#FFD700",fontSize:"13px"},children:r.reduce((e,t)=>e+t.completed,0)}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FF69B4",fontSize:"13px"},children:[r.reduce((e,t)=>e+t.cost,0),"€"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:r.reduce((e,t)=>e+t.directBought,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:r.reduce((e,t)=>e+t.bundleGames,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px",fontWeight:"bold"},children:r.reduce((e,t)=>e+t.bought,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:r.reduce((e,t)=>e+t.addedEpic,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:r.reduce((e,t)=>e+t.addedAmazon,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:r.reduce((e,t)=>e+t.addedOther,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:r.reduce((e,t)=>e+t.addedBorrowed,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:r.reduce((e,t)=>e+t.addedGamePass,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:r.reduce((e,t)=>e+t.addedGift,0)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",fontWeight:"bold"},children:r.reduce((e,t)=>e+t.added,0)}),(0,i.jsx)("td",{style:{padding:"8px"}}),(0,i.jsx)("td",{style:{padding:"8px"}})]}),(0,i.jsxs)("tr",{style:{backgroundColor:"#252525",fontWeight:"bold"},children:[(0,i.jsx)("td",{style:{padding:"8px",color:"#90caf9",fontSize:"13px"},children:"Avg/Year"}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FFA500",fontSize:"13px"},children:[Math.round(r.reduce((e,t)=>e+t.hours,0)/r.length),"h"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#FFD700",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.completed,0)/r.length)}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FF69B4",fontSize:"13px"},children:[Math.round(r.reduce((e,t)=>e+t.cost,0)/r.length),"€"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.directBought,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.bundleGames,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px",fontWeight:"bold"},children:Math.round(r.reduce((e,t)=>e+t.bought,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedEpic,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedAmazon,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedOther,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedBorrowed,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedGamePass,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedGift,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",fontWeight:"bold"},children:Math.round(r.reduce((e,t)=>e+t.added,0)/r.length)}),(0,i.jsx)("td",{style:{padding:"8px"}}),(0,i.jsx)("td",{style:{padding:"8px"}})]}),(0,i.jsxs)("tr",{style:{backgroundColor:"#2a2a2a",fontWeight:"bold"},children:[(0,i.jsx)("td",{style:{padding:"8px",color:"#90caf9",fontSize:"13px"},children:"Avg/Month"}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FFA500",fontSize:"13px"},children:[Math.round(r.reduce((e,t)=>e+t.hours,0)/(12*r.length)),"h"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#FFD700",fontSize:"13px"},children:(r.reduce((e,t)=>e+t.completed,0)/(12*r.length)).toFixed(1)}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FF69B4",fontSize:"13px"},children:[Math.round(r.reduce((e,t)=>e+t.cost,0)/(12*r.length)),"€"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:(r.reduce((e,t)=>e+t.directBought,0)/(12*r.length)).toFixed(1)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:(r.reduce((e,t)=>e+t.bundleGames,0)/(12*r.length)).toFixed(1)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px",fontWeight:"bold"},children:(r.reduce((e,t)=>e+t.bought,0)/(12*r.length)).toFixed(1)}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedEpic,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedAmazon,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedOther,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedBorrowed,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedGamePass,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:Math.round(r.reduce((e,t)=>e+t.addedGift,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",fontWeight:"bold"},children:Math.round(r.reduce((e,t)=>e+t.added,0)/(12*r.length))}),(0,i.jsx)("td",{style:{padding:"8px"}}),(0,i.jsx)("td",{style:{padding:"8px"}})]}),window.oldYearStats&&(0,i.jsxs)("tr",{style:{backgroundColor:"#1f1f1f",borderTop:"2px solid #666",fontWeight:"bold"},children:[(0,i.jsx)("td",{style:{padding:"8px",color:"#90caf9",fontSize:"13px"},children:window.oldYearStats.year}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FFA500",fontSize:"13px"},children:[Math.round(window.oldYearStats.hours),"h"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#FFD700",fontSize:"13px"},children:window.oldYearStats.completed}),(0,i.jsxs)("td",{style:{padding:"8px",textAlign:"right",color:"#FF69B4",fontSize:"13px"},children:[window.oldYearStats.cost,"€"]}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px"},children:window.oldYearStats.directBought}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"11px",whiteSpace:"nowrap"},children:window.oldYearStats.bundles>0?"".concat(window.oldYearStats.bundleGames," / ").concat(window.oldYearStats.bundles):window.oldYearStats.bundleGames}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#90EE90",fontSize:"13px",fontWeight:"bold"},children:window.oldYearStats.bought}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:window.oldYearStats.addedEpic}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:window.oldYearStats.addedAmazon}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:window.oldYearStats.addedOther}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:window.oldYearStats.addedBorrowed}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:window.oldYearStats.addedGamePass}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px"},children:window.oldYearStats.addedGift}),(0,i.jsx)("td",{style:{padding:"8px",textAlign:"right",color:"#87CEEB",fontSize:"13px",fontWeight:"bold"},children:window.oldYearStats.added}),(0,i.jsx)("td",{style:{padding:"8px"}}),(0,i.jsx)("td",{style:{padding:"8px"}})]})]})]})]}),a&&(0,i.jsx)("div",{style:{position:"fixed",left:a.x+10,top:a.y+10,backgroundColor:"#1a1a1a",color:"#fff",padding:"8px 12px",borderRadius:"4px",border:"1px solid #555",maxWidth:"400px",fontSize:"12px",zIndex:1001,pointerEvents:"none",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.content})]})}function L(e){let{games:t,countGames:l,selectedSources:r,onToggle:s}=e,o=arguments[0].toggleStates,a=arguments[0].onToggleState,n=[{name:"Steam (No Notes)",filterFn:e=>"Steam"===e.Source&&null==e.Notes,sourceName:"Steam",color:"#66c0f4"},{name:"Steam (With Notes)",filterFn:e=>"Steam"===e.Source&&null!=e.Notes,sourceName:"Steam",color:"#4a8ddfff"},{name:"GOG",filterFn:e=>"GOG"===e.Source,sourceName:"GOG",color:"#8B4A9C"},{name:"Epic",filterFn:e=>"Epic"===e.Source,sourceName:"Epic",color:"#FFFFFF"},{name:"Amazon",filterFn:e=>"Amazon"===e.Source,sourceName:"Amazon",color:"#FF9900"},{name:"Legacy Games",filterFn:e=>"Legacy Games"===e.Source,sourceName:"Legacy Games",color:"#5E35B1"},{name:"Humble",filterFn:e=>"Humble"===e.Source,sourceName:"Humble",color:"#FF6A00"},{name:"Indiegala",filterFn:e=>"Indiegala"===e.Source,sourceName:"Indiegala",color:"#E91E63"},{name:"Netflix",filterFn:e=>"Netflix"===e.Source,sourceName:"Netflix",color:"#E50914"},{name:"Riot Games",filterFn:e=>"Riot Games"===e.Source,sourceName:"Riot Games",color:"#FF4B4B"},{name:"Xbox Game Pass",filterFn:e=>"Xbox Game Pass"===e.Source,sourceName:"Xbox Game Pass",color:"#107C10"},{name:"Battle.net",filterFn:e=>"Battle.net"===e.Source,sourceName:"Battle.net",color:"#00AEFF"},{name:"Ubisoft Connect",filterFn:e=>"Ubisoft Connect"===e.Source,sourceName:"Ubisoft Connect",color:"#0082C9"},{name:"EA app",filterFn:e=>"EA app"===e.Source,sourceName:"EA app",color:"#0066CC"},{name:"Other",filterFn:e=>null!=e.Source&&-1===["Xbox Game Pass","Humble","Indiegala","Battle.net","Legacy Games","Steam","GOG","Epic","EA app","Ubisoft Connect","Amazon","Riot Games","Netflix"].indexOf(e.Source),sourceName:"Other",color:"#888888"}],c=l?l.filter(e=>e.IsInstalled).length:t.filter(e=>e.IsInstalled).length,u=l?l.filter(e=>!!e.Android).length:t.filter(e=>!!e.Android).length,p=l?l.filter(e=>!!e.TV).length:t.filter(e=>!!e.TV).length,h=l?l.filter(e=>(e.BestOnDeck||0)>0).length:t.filter(e=>(e.BestOnDeck||0)>0).length,g=l?l.filter(e=>!!e.Desk).length:t.filter(e=>!!e.Desk).length,m=(null==o?void 0:o.Installed)==="yes"?"state-btn state-btn--yes":(null==o?void 0:o.Installed)==="no"?"state-btn state-btn--no":"state-btn",f=(null==o?void 0:o.Android)==="yes"?"state-btn state-btn--android-yes":(null==o?void 0:o.Android)==="no"?"state-btn state-btn--android-no":"state-btn",x=(null==o?void 0:o.TV)==="yes"?"state-btn state-btn--tv-yes":(null==o?void 0:o.TV)==="no"?"state-btn state-btn--no":"state-btn",S=(null==o?void 0:o.BestOnDeck)==="yes"?"state-btn state-btn--best-yes":(null==o?void 0:o.BestOnDeck)==="no"?"state-btn state-btn--no":"state-btn",y=(null==o?void 0:o.Desk)==="yes"?"state-btn state-btn--desk-yes":(null==o?void 0:o.Desk)==="no"?"state-btn state-btn--no":"state-btn";return(0,i.jsxs)("div",{className:"source-stats",children:[(0,i.jsxs)("div",{className:"summary",children:[(0,i.jsx)("i",{className:"fas fa-gamepad",style:{color:"#64B5F6",fontSize:"14px"}}),(0,i.jsx)("span",{children:t.length})]}),(0,i.jsx)("div",{className:"source-sep"}),(0,i.jsxs)("div",{className:"source-list",children:[(0,i.jsxs)("button",{onClick:()=>a?a("Installed"):void 0,title:"Installed",className:m,children:[(0,i.jsx)(d.gBZ,{}),(0,i.jsx)("span",{className:"state-count",children:c})]}),(0,i.jsxs)("button",{onClick:()=>a?a("Android"):void 0,title:"Android",className:f,children:[(0,i.jsx)(d.DGu,{}),(0,i.jsx)("span",{className:"state-count",children:u})]})]}),(0,i.jsx)("div",{className:"source-sep"}),(0,i.jsxs)("div",{className:"source-list",children:[(0,i.jsxs)("button",{onClick:()=>a?a("TV"):void 0,title:"TV",className:x,children:[(0,i.jsx)(d.cap,{}),(0,i.jsx)("span",{className:"state-count",children:p})]}),(0,i.jsxs)("button",{onClick:()=>a?a("BestOnDeck"):void 0,title:"BestOnDeck",className:S,children:[(0,i.jsx)(d.Y4E,{}),(0,i.jsx)("span",{className:"state-count",children:h})]}),(0,i.jsxs)("button",{onClick:()=>a?a("Desk"):void 0,title:"Desk",className:y,children:[(0,i.jsx)(d.Vp6,{}),(0,i.jsx)("span",{className:"state-count",children:g})]})]}),(0,i.jsx)("div",{className:"source-sep"}),n.map(e=>{let o=(l&&l.length?l:t).filter(e.filterFn).length,a=-1!==(r||[]).indexOf(e.name)?{border:"1px solid ".concat(e.color||"rgba(255,255,255,1)"),backgroundColor:e.color?"".concat(e.color,"20"):"rgba(255,255,255,0.06)"}:void 0;return(0,i.jsxs)("button",{onClick:()=>s?s(e.name):void 0,className:"source-btn",style:{opacity:0===o?.5:1,...a},children:["Other"!==e.sourceName&&(0,i.jsx)("img",{src:"ico/".concat(e.sourceName,".png"),alt:e.sourceName,onError:e=>{e.target.style.display="none"}}),"Other"===e.sourceName&&(0,i.jsx)("i",{className:"fas fa-ellipsis-h",style:{color:e.color||"#888",fontSize:"14px"}}),(0,i.jsx)("span",{className:"count",children:o})]},e.name)})]})}class z{async load(){try{let x="scripts/games.json.gz";window.location.href.indexOf("nite")>-1&&(x="scripts/games.pl.json.gz");let S="scripts/games_json_hash.txt",y=null;try{let e="undefined"!=typeof caches?await caches.open("my-cache"):null,t=null;try{let e=await fetch(S+"?v="+Date.now(),{cache:"no-cache"});e.ok&&(t=(await e.text()).trim())}catch(e){console.warn("Failed to fetch remote games.json hash",e)}let l=null;try{if("undefined"!=typeof localStorage&&(l=localStorage.getItem("games_json_hash")),(!l||""===l.trim())&&e){let t=await e.match("/"+S);t&&(l=(await t.text()).trim())}}catch(e){console.warn("Failed to read cached games.json hash",e)}if(console.log("Library load: remoteHash=",t,"cachedHash=",l),l&&(null==t||t===l)){if(e){let t=await e.match("/"+x);t&&(y=await t.blob(),console.log("Library load: using cached games.gz"))}if(!y){console.log("Library load: hashes match but gz not in cache, fetching gz");let t=await fetch(x,{cache:"no-cache"});if(!t.ok)throw Error("Failed to fetch games gzip");let l=t.clone();if(y=await t.blob(),e)try{await e.put("/"+x,l)}catch(e){console.warn("Failed to cache games.gz",e)}}}else{console.log("Library load: hashes differ or unavailable, fetching gz and updating cache");let l=await fetch(x,{cache:"no-cache"});if(!l.ok)throw Error("Failed to fetch games gzip");let i=l.clone();if(y=await l.blob(),e)try{await e.put("/"+x,i)}catch(e){console.warn("Failed to cache games.gz",e)}if(t){if(console.log("Library load: updating cached hash from earlier fetched remote hash"),"undefined"!=typeof localStorage)try{localStorage.setItem("games_json_hash",t)}catch(e){}else if(e)try{await e.put("/"+S,new Response(t,{headers:{"Content-Type":"text/plain"}}))}catch(e){console.warn("Failed to cache games_json_hash.txt",e)}}else try{console.log("Library load: fetching remote hash to update cache");let t=await fetch(S,{cache:"no-cache"});if(t.ok){let l=(await t.text()).trim();if("undefined"!=typeof localStorage)try{localStorage.setItem("games_json_hash",l)}catch(e){}else if(e)try{await e.put("/"+S,new Response(l,{headers:{"Content-Type":"text/plain"}}))}catch(e){}}}catch(e){}}}catch(t){console.warn("Error using cached games.gz flow, falling back to simple fetch",t);let e=await fetch(x+"?v="+Math.random());y=await e.blob()}if(!y)throw Error("Failed to obtain games gzip");let v=y.stream().pipeThrough(new DecompressionStream("gzip")),b=await new Response(v).blob(),C=await b.text(),w=JSON.parse(C);this.allGames=w.map(e=>{let t=new c;return t.copyPropertyValuesFrom(e),t});let j=new Map;for(let e of this.allGames)if(e.Bundles&&e.Bundles.length>0)for(let t of e.Bundles)j.set(t,(null!=(p=j.get(t))?p:0)+1);for(let c of this.allGames)if(c.Bundles&&c.Bundles.length>0){var e,t,l,i,r,s,o,a,n,d,u,p,h,g,m,f=null!=(h=j.get(c.Bundles[0]))?h:0;1==f&&(c.Bundle="",c.Bundles=[],c.AddedBundle=null!=(m=null==(g=c.BoughtMonth)?void 0:g.split("-")[0])?m:"")}let k=new Map;for(let t of this.allGames)if(null!=t.Playtime&&null!=t.Categories){let l=t.Categories.split("|")[0],i=null!=(e=k.get(l))?e:0;k.set(l,i+t.Playtime)}for(let e of this.allGames)null!=e.Categories&&(e.CategoryHours=null==(t=e.Categories.split("|"))?void 0:t.filter(e=>"Bought"!=e&&"Mouse"!=e).map(e=>{var t;let l=null!=(t=k.get(e))?t:0;return e+" ("+Math.round(l/3600).toString()+"h)"}).join("|"));let N={},F={};for(let e of this.allGames){"Steam"==e.Source&&null!=e.Playtime&&(e.SteamPlaytime=e.Playtime);let t=this.allGames.filter(t=>t.Name==e.Name);t.length>1&&null==N[e.Name]&&(N[e.Name]=t.map(e=>e.Playtime).reduce((e,t)=>(null!=e?e:0)+(null!=t?t:0),0))}for(let e of this.allGames.sort((e,t)=>{let l=["Steam","Epic","GOG","Xbox Game Pass"],i=-1!==l.indexOf(e.Source)?l.indexOf(e.Source):999,r=-1!==l.indexOf(t.Source)?l.indexOf(t.Source):999;return i-r||e.Source.localeCompare(t.Source)})){let t=this.allGames.filter(t=>t.Name==e.Name);t.length>1&&null==F[e.Name]&&(F[e.Name]=t.filter(t=>t.Source!=e.Source).map(e=>e.Source).filter(e=>null!=e))}for(let e of this.allGames)null!=N[e.Name]&&(e.Playtime=N[e.Name]),null!=F[e.Name]&&(e.OtherSources=F[e.Name]);for(let e of this.allGames)if(e.uri="plgame://"+e.Id+"?game="+encodeURI(e.GameId)+"&source="+encodeURI(null!=(s=e.Source)?s:"-1")+"&name="+encodeURI(e.Name)+"&cat="+encodeURI(e.Deck),e.Bought=(null!=(o=null==(l=e.Categories)?void 0:l.indexOf("Bought"))?o:-1)>-1,e.Categories=null!=(a=null==(r=e.Categories)||null==(i=r.split("|"))?void 0:i.filter(e=>"Bought"!=e).join("|"))?a:null,"string"==typeof e.CompletionStatus){let t=e.CompletionStatus.trim();e.CompletionStatus=""===t?null:t}else null==e.CompletionStatus&&(e.CompletionStatus=null);for(let e of this.allGames.filter(e=>!e.Hidden)){let t=this.allGames.filter(t=>t!==e&&(t.Name===e.Name||t.SteamId&&t.SteamId===e.SteamId)).filter(e=>e.Hidden);if(0===t.length)continue;for(let l of t){let t=null!=(n=l.CompletionStatus)?n:null;if(null!=t&&"Not Played"!==t&&"Played"!==t&&(null==e.CompletionStatus||"Not Played"===e.CompletionStatus||"Played"===e.CompletionStatus)){e.CompletionStatus=t;break}}let l=new Set;e.Categories&&e.Categories.split("|").forEach(e=>{e&&l.add(e)}),t.forEach(e=>{e.Categories&&e.Categories.split("|").forEach(e=>{e&&l.add(e)})}),e.Categories=l.size>0?Array.from(l).join("|"):null}try{let e=new Map;for(let t of this.allGames){let l=null!=(d=t.CompletionStatus)?d:"<null>";e.set(l,(null!=(u=e.get(l))?u:0)+1)}let t=Array.from(e.entries()).sort((e,t)=>t[1]-e[1]);try{window.__completionStatusCounts=Object.fromEntries(t)}catch(e){}}catch(e){}this.isClientStarted=!0,this._preloaded=!0,this.refreshFilterOptions(this.allGames),window.games=this.allGames}catch(e){console.error("Library load failed",e),this.allGames=[]}}getAllGames(){return this.allGames}getPrecomputedViews(){return this.precomputedViews}setPrecomputedView(e,t){this.precomputedViews.set(e,t)}refreshFilterOptions(e){this.sources=Array.from(new Set(e.map(e=>{var t;return null!=(t=e.Source)?t:""}).filter(e=>""!==e))).sort((e,t)=>e.localeCompare(t)),this.tags=Array.from(new Set(e.flatMap(e=>{var t;return(null!=(t=e.Tags)?t:"").split("|")}).filter(e=>e))).sort((e,t)=>e.localeCompare(t)),this.genres=Array.from(new Set(e.flatMap(e=>{var t;return(null!=(t=e.Genres)?t:"").split("|")}).filter(e=>e))).sort((e,t)=>e.localeCompare(t)),this.categories=Array.from(new Set(e.flatMap(e=>{var t;return(null!=(t=e.Categories)?t:"").split("|")}).filter(e=>e))).sort((e,t)=>e.localeCompare(t));let t=Array.from(new Set(e.map(e=>e.ReleaseYear).filter(e=>null!=e))).sort((e,t)=>t-e);this.releaseYears=t.map(e=>e.toString());let l=Array.from(new Set(e.map(e=>{if(!e.Added)return null;let t=e.Added;try{if("string"==typeof t&&t.indexOf("/Date(")>-1)return new Date(parseInt(t.replace("/Date(","").replace(")/",""))).getFullYear();let e=new Date(t);return isNaN(e.getFullYear())?null:e.getFullYear()}catch(e){return null}}).filter(e=>null!=e))).sort((e,t)=>t-e);this.addedYears=l.map(e=>e.toString());let i=new Map;e.forEach(e=>{var t;null==(t=e.Features)||t.split("|").forEach(e=>{if(e&&e.trim()){let t=e.trim().toLowerCase();i.has(t)||i.set(t,e.trim())}})}),this.features=Array.from(i.values()).sort((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})),this.multi=Array.from(new Set(e.flatMap(e=>{var t;return(null!=(t=e.Multi)?t:"").split("|")}).filter(e=>e))).sort((e,t)=>e.localeCompare(t)),this.ageRatings=Array.from(new Set(e.map(e=>{var t;return null!=(t=e.AgeRating)?t:""}).filter(e=>e))).sort((e,t)=>e.localeCompare(t)),this.coop=Array.from(new Set(e.map(e=>{var t;return null!=(t=e.Coop)?t:""}).filter(e=>e))).sort((e,t)=>e.localeCompare(t)),this.localCoop=Array.from(new Set(e.map(e=>{var t;return null!=(t=e.LocalCoop)?t:""}).filter(e=>e))).sort((e,t)=>e.localeCompare(t)),this.onlineCoop=Array.from(new Set(e.map(e=>{var t;return null!=(t=e.OnlineCoop)?t:""}).filter(e=>e))).sort((e,t)=>e.localeCompare(t))}constructor(){this.allGames=[],this.precomputedViews=new Map,this.sources=[],this.tags=[],this.features=[],this.categories=[],this.genres=[],this.multi=[],this.releaseYears=[],this.addedYears=[],this.ageRatings=[],this.coop=[],this.localCoop=[],this.onlineCoop=[],this._preloaded=!1,this.isClientStarted=!1,this.ready=Promise.resolve(),this.ready=this.load()}}let _=new z,T=!1;function Y(){let e,t=(0,h.useRouter)(),[r,g]=(0,o.useState)(!1),[m,f]=(0,o.useState)({games:[],group:[],take:300}),[x,S]=(0,o.useState)("Installed"),[v,b]=(0,o.useState)({skip:0,take:300}),[C,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)(0),F=(0,o.useRef)(null),B=(0,o.useRef)(null),[I,P]=(0,o.useState)(!1),[M,D]=(0,o.useState)([]),[E,z]=(0,o.useState)(0),[Y,H]=(0,o.useState)({}),[V,W]=(0,o.useState)(!1),[U,q]=(0,o.useState)([]),[X,J]=(0,o.useState)(null),[K,$]=(0,o.useState)(!1),[Z,Q]=(0,o.useState)(!1),[ee,et]=(0,o.useState)(!1),el=(0,o.useRef)(new Map),[ei,er]=(0,o.useState)("right-start"),[es,eo]=(0,o.useState)(100),[ea,en]=(0,o.useState)(-50);(0,o.useEffect)(()=>{let e=e=>{let t=window.innerWidth,l=window.innerHeight,i=e.clientX,r=e.clientY,s=i>t/2;er(s?"left-start":"right-start"),eo(s?500:100),en(r<l/2?50:-50)};return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e)},[]),(0,o.useEffect)(()=>{"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{let e=await fetch("/service-worker.js",{cache:"no-cache"});if(console.log("Service Worker fetch status:",e.status,"content-type:",e.headers.get("content-type")),!e.ok)return void console.error("Service Worker file fetch failed with status",e.status);let t=await e.text();try{let e=await navigator.serviceWorker.register("/service-worker.js");console.log("Service Worker registered with scope:",e.scope)}catch(e){console.warn("Service Worker registration failed, attempting blob fallback:",e);try{let e=new Blob([t],{type:"application/javascript"}),l=URL.createObjectURL(e),i=await navigator.serviceWorker.register(l);console.log("Service Worker registered via blob with scope:",i.scope)}catch(e){console.error("Blob registration also failed:",e)}}}catch(e){console.error("Failed to fetch /service-worker.js before registration:",e)}})},[]);function ed(e){S(e),et(!0),setTimeout(()=>{if((!U||0===U.length)&&_.precomputedViews.has(e)){let t=_.precomputedViews.get(e);D(t.games),f(t),et(!1)}},20)}function ec(e){t.push("?".concat(e)),ed(e)}async function eu(){console.log("Init"),T=!0;try{var e;let t=new URLSearchParams(window.location.search),l=Array.from(t.keys())[0],i=null!=(e=null!=l?l:x)?e:"Installed";ed(i)}catch(e){ed("Installed")}}(0,o.useEffect)(()=>{var e;if(!t.isReady)return;let{query:l}=t;console.log("Router Query ready:",JSON.stringify(l));let i=null!=(e=Object.keys(l)[0])?e:"Installed",r=!1;return(async()=>{for(;!T&&!r;)await new Promise(e=>setTimeout(e,250));!r&&i!==x&&(console.log("Route: "+i),S(i),b({skip:0,take:m.take}),B.current&&B.current.scrollTo({top:0,behavior:"smooth"}))})(),()=>{r=!0}},[t.isReady,t.query]),(0,o.useEffect)(()=>{b({skip:0,take:m.take||300}),B.current&&B.current.scrollTo({top:0,behavior:"auto"})},[m.take,m.games.length]),(0,o.useEffect)(()=>{F.current&&F.current.querySelectorAll(".k-card").forEach((e,t)=>{t===k?(e.classList.add("focused"),e.scrollIntoView({behavior:"smooth",block:"center"})):e.classList.remove("focused")})},[k]),(0,o.useEffect)(()=>{if(!I)return;let e=m.games[k];if(!e)return void J(null);$(!0);try{let t=A(e,!0);J({game:e,html:t}),$(!1)}catch(e){console.warn("Failed to generate tooltip for focused game",e),J(null),$(!1)}},[k,I,m.games]),(0,o.useEffect)(()=>{let e=B.current;if(!e)return;let t=e=>{var t;if(!Z)return;let l=e.target;if(!l)return;let i=null==(t=l.closest)?void 0:t.call(l,".k-card");if(!i)return;let r=i.getAttribute("data-game-id");if(!r)return;let s=el.current.get(r);if(!s)return;let o=A(s,!0);J({game:s,html:o})};return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[Z,A]),(0,o.useEffect)(()=>{window.location.href.indexOf("fullscreen")>-1&&P(!0),(async()=>{try{await _.ready}catch(e){console.warn("Failed to load games into library",e)}})().then(()=>{l.e(314).then(l.bind(l,5314)).then(e=>{let t=e.default;try{y.flat().forEach(e=>{let l=e.title,i=e.filterFn;if(!i&&e.filterString)try{i=t(e.filterString)}catch(e){console.warn("Parsing filterString for",l,"failed",e)}if(i&&e.sortField&&e.groupField)try{var r;let t=function(e,t,l,i){let r=_.allGames.filter(t);if(r.sort((t,i)=>{let r=t[l],s=i[l],o="Deck"===l||"HLGroup"===l?1:-1;if(r!==s)return null==r?1:null==s?-1:r>s?o:-o;let a=t[e],n=i[e];return a!==n?null==a?1:null==n||a>n?-1:1:t.Added!==i.Added?null==t.Added?1:null==i.Added||t.Added>i.Added?-1:1:t.Id!==i.Id?null==t.Id?1:null==i.Id?-1:t.Id>i.Id?1:-1:0}),i=r.length>800?300:800,"AddedBundle"===l){let e=new Map;r.forEach(t=>{if(t.Bundles&&t.Bundles.length>0){let l=t.Bundles[0];e.has(l)||e.set(l,[]),e.get(l).push(t)}});let t=[];e.forEach((e,l)=>{var i,r;let s=e[0],o=new c;o.Id=s.Id,o.Name=l,o.AddedBundle=null!=(r=null==(i=s.BoughtMonth)?void 0:i.split("-")[0])?r:"",o.Added=s.Added,o.BoughtMonth=s.BoughtMonth,o.SubGames=e.sort((e,t)=>{var l,i;return(null!=(l=t.Playtime)?l:0)-(null!=(i=e.Playtime)?i:0)}),o.Source="Humble",o.Price=s.BundlePrice,t.push(o)});let l=[...new Set((r=[...t,...r=r.filter(e=>!e.Bundles||0===e.Bundles.length)]).map(e=>{var t,l;return null!=(l=null==(t=e.BoughtMonth)?void 0:t.split("-")[0])?l:""}).filter(e=>e))],i=new Map;l.filter(e=>null!=e).forEach(e=>{let t=r.filter(t=>{var l,i;return(null!=(i=null==(l=t.BoughtMonth)?void 0:l.split("-")[0])?i:"")===e}).reduce((e,t)=>{var l;let i=parseFloat((null==(l=t.Price)?void 0:l.toString())||"0");return e+(isNaN(i)?0:i)},0);i.set(e,t)}),r.forEach(e=>{if(e.BoughtMonth){var t,l,r,s,o;e.AddedBundle="".concat(null!=(s=null==(t=e.BoughtMonth)?void 0:t.split("-")[0])?s:""," [").concat(null==(l=i.get(null!=(o=null==(r=e.BoughtMonth)?void 0:r.split("-")[0])?o:""))?void 0:l.toFixed(0),"€]")}})}if(!(l.indexOf(",")>-1))return{games:r,group:[{field:l,dir:"Deck"==l||"HLGroup"==l?"asc":"desc"}],take:i};{let e=l.split(",").map(e=>({field:e,dir:"desc"}));return{games:r,group:e,take:i}}}(e.sortField,i,e.groupField,null!=(r=e.take)?r:300);_.precomputedViews.set(l,t)}catch(e){console.warn("Preparing view for",l,"failed",e)}})}catch(e){console.warn("Precompute views failed:",e)}try{try{window.__libraryGames=_.allGames}catch(e){}}catch(e){}eu()}).catch(e=>{console.warn("Failed to load filterString parser",e);try{eu()}catch(e){}})})},[]);let ep=e=>{let t=y.map(e=>e.map(e=>e.title)).flat(),l=t.indexOf(null!=x?x:""),i=l;"LEFT"===e?i=(l+1)%t.length:"RIGHT"===e&&(i=(l-1+t.length)%t.length);let r=t[i];console.log("Swiped ".concat(e,", changing button from ").concat(x," to ").concat(r)),S(r),ec(r)},eh=(0,p.uh)({onSwipedLeft:()=>ep("LEFT"),onSwipedRight:()=>ep("RIGHT")});return(0,i.jsx)(n.Ay,{onConnect:()=>P(!0),onDisconnect:()=>P(!1),onButtonDown:e=>{let t=1;try{var l;let e=null==(l=F.current)?void 0:l.querySelectorAll(".k-card");if(e&&e.length>0){let l=Number.POSITIVE_INFINITY,i=[];e.forEach(e=>{let t=e.getBoundingClientRect();i.push(Math.round(t.top)),t.top<l&&(l=t.top)});let r=Math.round(l);t=i.filter(e=>e===r).length||1}}catch(e){console.warn("Failed to compute number of columns for gamepad navigation, defaulting to 1",e),t=1}switch(e){case"DPadUp":N(e=>Math.max(e-t,0));break;case"DPadDown":N(e=>Math.min(e+t,m.games.length-1));break;case"DPadLeft":N(e=>Math.max(e-1,0));break;case"DPadRight":N(e=>Math.min(e+1,m.games.length-1));break;case"X":let i=m.games[k];i&&i.Steam&&window.open(i.Steam,"_blank");break;case"A":let s=m.games[k];s&&s.uri&&window.open(s.uri);break;case"B":if(X){J(null),$(!1);break}if(V){W(!1);break}r&&g(!1);break;case"RB":ep("LEFT");break;case"LB":ep("RIGHT");break;default:console.log(e)}},children:(0,i.jsx)("div",{className:"app-root",...eh,children:(0,i.jsxs)("div",{ref:F,className:"app-inner",children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("link",{rel:"icon",href:"/favicon.png",type:"image/png"}),(0,i.jsx)("title",{children:"PlayniteWeb"}),(0,i.jsx)("meta",{name:"description",content:"Playnite Web"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=0.58, maximum-scale=0.58, user-scalable=0"}),(0,i.jsx)("meta",{"http-equiv":"Content-Type",content:"text/html;charset=utf-8"}),(0,i.jsx)("meta",{"http-equiv":"Cache-Control",content:"no-cache, no-store, must-revalidate"}),(0,i.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,i.jsx)("meta",{"http-equiv":"Pragma",content:"no-cache"}),(0,i.jsx)("meta",{"http-equiv":"Expires",content:"0"}),(0,i.jsx)("link",{rel:"icon",href:"favicon.ico"})]}),X&&(0,i.jsxs)("div",{className:"tooltip-docked",children:[(0,i.jsxs)("div",{className:"docked-header",children:[(0,i.jsx)("span",{className:"docked-title",children:X.game.Name}),(0,i.jsx)("button",{className:"docked-close-btn",onClick:()=>J(null),children:"\xd7"})]}),K?(0,i.jsx)("div",{className:"tooltip-loading",children:(0,i.jsxs)("div",{className:"tooltip-loading-center",children:[(0,i.jsx)("div",{className:"loader-spinner loader-spinner-lg"}),(0,i.jsx)("div",{className:"tooltip-loading-text",children:"Loading tooltip..."})]})}):(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:X.html}})]}),(0,i.jsx)(a.m_,{id:"tltip",style:{translate:"0 ".concat(ea,"px")},className:I||X?"custom-tooltip hidden":"custom-tooltip",anchorSelect:".k-card[data-game-id]",events:["hover"],openOnClick:!1,delayShow:30,delayHide:30,opacity:1,noArrow:!0,place:ei,offset:es,float:!0,closeOnEsc:!0,closeOnScroll:!1,closeOnResize:!1,disableStyleInjection:!1,clickable:!0,render:e=>{let{activeAnchor:t}=e,l=null==t?void 0:t.getAttribute("data-game-id");if(!l)return null;let r=el.current.get(l);return r?(0,i.jsx)(G,{item:r},r.Id):null}}),V&&(0,i.jsx)(R,{allGames:_.allGames,onClose:()=>W(!1)}),(0,i.jsxs)("div",{className:"custom-toolbar",children:[y.map((e,t)=>(0,i.jsx)("div",{className:"left-buttons",children:e.map(e=>{var t;let{title:l,icon:r,color:s}=e;return(0,i.jsx)("span",{children:(t=x===l,(0,i.jsx)("button",{className:"custom-button ".concat(t?"selected":""),onClick:()=>ec(l),children:(0,i.jsx)(u.g,{icon:r,color:s})}))},"btn-".concat(l))})},"btn-group-".concat(t))),(0,i.jsxs)("div",{className:"right-buttons",children:[(0,i.jsx)("button",{className:"custom-button ".concat(Z?"selected":""),onClick:()=>{let e=!Z;Q(e),e||(J(null),$(!1))},title:Z?"Exit Dock Mode":"Enter Dock Mode",children:(0,i.jsx)("i",{className:"fas fa-thumbtack"})}),(0,i.jsx)("button",{className:"custom-button ".concat(V?"selected":""),onClick:()=>W(!0),title:"Statistics",children:(0,i.jsx)("i",{className:"fas fa-chart-bar"})}),(0,i.jsx)("button",{className:"custom-button ".concat(r?"selected":""),onClick:()=>{g(!r)},children:(0,i.jsx)(d.YsJ,{})}),(0,i.jsx)("button",{className:"custom-button ".concat(C?"selected":""),onClick:function(e){w(!C)},children:(0,i.jsx)(d.__w,{})})]})]}),(0,i.jsx)(O,{sources:_.sources,tags:_.tags,genres:_.genres,features:_.features,multi:_.multi,coop:_.coop,localCoop:_.localCoop,onlineCoop:_.onlineCoop,releaseYears:_.releaseYears,addedYears:_.addedYears,ageRatings:_.ageRatings,isFilterVisible:r,setIsFilterVisible:g,unfilteredCurrentGames:(e="Bought"===x?m.games:M,U&&0!==U.length?e.filter(e=>U.some(t=>"Steam (No Notes)"===t?"Steam"===e.Source&&null==e.Notes:"Steam (With Notes)"===t?"Steam"===e.Source&&null!=e.Notes:"Other"===t?null!=e.Source&&-1===["Xbox Game Pass","Humble","Indiegala","Battle.net","Legacy Games","Steam","GOG","Epic","EA app","Ubisoft Connect","Amazon"].indexOf(e.Source):e.Source===t)):e),cGames:m,setGames:f,refreshCountersSignal:E,toggleFilters:Y,onFiltersChanged:()=>{console.log("Filters applied")}}),(0,i.jsxs)("div",{ref:B,className:"list-wrapper",children:[ee&&(0,i.jsx)("div",{className:"list-loader-overlay",children:(0,i.jsxs)("div",{className:"list-loader-box",children:[(0,i.jsx)("div",{className:"loader-spinner"}),(0,i.jsx)("div",{children:"Loading games..."})]})}),(0,i.jsx)(j,{games:m.games,group:m.group,skip:v.skip,take:v.take,isGamepad:I,moreInfo:C,GetToolTip:A,but:x,gameMapRef:el})]}),(0,i.jsx)("div",{className:"pager-wrapper",children:function(e,t,l,r){let s=Math.max(1,Math.ceil(e/l)),o=Math.floor(t/l)+1;if(s<=1)return null;let a=e=>{r(e),B.current&&B.current.scrollTo({top:0,behavior:"smooth"})},n=[];for(let e=1;e<=s;e++){let t=(e-1)*l,r=e===o;n.push((0,i.jsx)("button",{className:"source-btn ".concat(r?"selected":""," pager-page-btn"),onClick:()=>a(t),children:e},e))}return(0,i.jsx)("div",{className:"pager-stats pager-inner",children:(0,i.jsxs)("div",{className:"pager-flex",children:[(0,i.jsxs)("div",{className:"summary",children:[(0,i.jsx)("i",{className:"fas fa-list pager-summary-icon"}),(0,i.jsx)("span",{className:"pager-total",children:e})]}),(0,i.jsx)("div",{className:"source-sep"}),(0,i.jsx)("div",{className:"source-list",children:n})]})})}(m.games.length,v.skip,v.take,e=>{b(t=>({...t,skip:e})),B.current&&B.current.scrollTo({top:0,behavior:"smooth"})})}),(0,i.jsx)("div",{className:"statusbar-wrapper",children:(0,i.jsx)("div",{children:(0,i.jsx)(L,{games:m.games,countGames:M,selectedSources:U,onToggle:e=>q(t=>-1===t.indexOf(e)?[...t,e]:t.filter(t=>t!==e)),toggleStates:Y,onToggleState:e=>{H(t=>{let l,i="Installed"===e?"Installed":"Android"===e?"Android":"BestOnDeck"===e?"BestOnDeck":"Desk"===e?"Desk":"TV",r=t[i];return l=r&&"all"!==r?"yes"===r?"no":"all":"yes",{...t,[i]:l}})}})})}),I&&(0,i.jsxs)("div",{className:"gamepad-hud",children:[(0,i.jsx)("div",{className:"hud-left",children:"A: Open | X: Open Steam | B: Back"}),(0,i.jsx)("div",{className:"hud-right",children:"LB/RB: Switch Tabs | DPad: Navigate"})]})]})})})}_.allGames=[]},6760:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(4971)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[593,938,725,805,625,636,792],()=>t(6760)),_N_E=e.O()}]);